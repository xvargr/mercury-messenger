{"ast":null,"code":"var _jsxFileName = \"/home/agreus/Documents/webdev/mercury-messenger/client/src/pages/MainWindow.js\",\n  _s = $RefreshSig$();\nimport { React, useContext, useEffect } from \"react\";\nimport { useNavigate, Outlet } from \"react-router-dom\";\n\n// components\nimport GroupsBar from \"../components/layout/GroupsBar\";\nimport { FlashStack } from \"../utils/iterableComponents\";\n\n// ui\nimport { IntroductionModal, ReconnectingModal } from \"../components/ui/Modal\";\n\n// context\nimport { DataContext } from \"../components/context/DataContext\";\nimport { SocketContext } from \"../components/context/SocketContext\";\n\n// utility\nimport useSocket from \"../utils/socket\";\nimport useStateRestore from \"../utils/restoreState\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MainWindow() {\n  _s();\n  const navigate = useNavigate();\n  const {\n    socket\n  } = useContext(SocketContext);\n  const {\n    isLoggedIn,\n    setIsLoggedIn\n  } = useContext(DataContext);\n  const {\n    statusUpdater\n  } = useSocket();\n  useStateRestore();\n\n  // redirect to login if not logged in\n  useEffect(() => {\n    if (!localStorage.username || socket && !isLoggedIn) navigate(\"/login\");else setIsLoggedIn(true);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  });\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"w-screen font-nunito flex justify-center bgHeroTopo fullscreen\" // see tailwind base\n    ,\n    onMouseMove: statusUpdater,\n    onKeyDown: statusUpdater,\n    onClick: statusUpdater,\n    onLoad: statusUpdater,\n    onTouchEnd: statusUpdater,\n    onTouchMove: statusUpdater,\n    children: [!localStorage.introduction || /*#__PURE__*/_jsxDEV(IntroductionModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 38\n    }, this), /*#__PURE__*/_jsxDEV(ReconnectingModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FlashStack, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(GroupsBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 5\n  }, this);\n}\n_s(MainWindow, \"xzQ/Y1NnjC2uZQOp/rSXMt8n3Ps=\", false, function () {\n  return [useNavigate, useSocket, useStateRestore];\n});\n_c = MainWindow;\nexport default MainWindow;\nvar _c;\n$RefreshReg$(_c, \"MainWindow\");","map":{"version":3,"names":["React","useContext","useEffect","useNavigate","Outlet","GroupsBar","FlashStack","IntroductionModal","ReconnectingModal","DataContext","SocketContext","useSocket","useStateRestore","MainWindow","navigate","socket","isLoggedIn","setIsLoggedIn","statusUpdater","localStorage","username","introduction"],"sources":["/home/agreus/Documents/webdev/mercury-messenger/client/src/pages/MainWindow.js"],"sourcesContent":["import { React, useContext, useEffect } from \"react\";\nimport { useNavigate, Outlet } from \"react-router-dom\";\n\n// components\nimport GroupsBar from \"../components/layout/GroupsBar\";\nimport { FlashStack } from \"../utils/iterableComponents\";\n\n// ui\nimport { IntroductionModal, ReconnectingModal } from \"../components/ui/Modal\";\n\n// context\nimport { DataContext } from \"../components/context/DataContext\";\nimport { SocketContext } from \"../components/context/SocketContext\";\n\n// utility\nimport useSocket from \"../utils/socket\";\nimport useStateRestore from \"../utils/restoreState\";\n\nfunction MainWindow() {\n  const navigate = useNavigate();\n  const { socket } = useContext(SocketContext);\n  const { isLoggedIn, setIsLoggedIn } = useContext(DataContext);\n  const { statusUpdater } = useSocket();\n\n  useStateRestore();\n\n  // redirect to login if not logged in\n  useEffect(() => {\n    if (!localStorage.username || (socket && !isLoggedIn)) navigate(\"/login\");\n    else setIsLoggedIn(true);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  });\n\n  return (\n    <main\n      className=\"w-screen font-nunito flex justify-center bgHeroTopo fullscreen\" // see tailwind base\n      onMouseMove={statusUpdater}\n      onKeyDown={statusUpdater}\n      onClick={statusUpdater}\n      onLoad={statusUpdater}\n      onTouchEnd={statusUpdater}\n      onTouchMove={statusUpdater}\n    >\n      {!localStorage.introduction || <IntroductionModal />}\n      <ReconnectingModal />\n      <FlashStack />\n      <GroupsBar />\n      <Outlet />\n    </main>\n  );\n}\n\nexport default MainWindow;\n"],"mappings":";;AAAA,SAASA,KAAK,EAAEC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AACpD,SAASC,WAAW,EAAEC,MAAM,QAAQ,kBAAkB;;AAEtD;AACA,OAAOC,SAAS,MAAM,gCAAgC;AACtD,SAASC,UAAU,QAAQ,6BAA6B;;AAExD;AACA,SAASC,iBAAiB,EAAEC,iBAAiB,QAAQ,wBAAwB;;AAE7E;AACA,SAASC,WAAW,QAAQ,mCAAmC;AAC/D,SAASC,aAAa,QAAQ,qCAAqC;;AAEnE;AACA,OAAOC,SAAS,MAAM,iBAAiB;AACvC,OAAOC,eAAe,MAAM,uBAAuB;AAAC;AAEpD,SAASC,UAAU,GAAG;EAAA;EACpB,MAAMC,QAAQ,GAAGX,WAAW,EAAE;EAC9B,MAAM;IAAEY;EAAO,CAAC,GAAGd,UAAU,CAACS,aAAa,CAAC;EAC5C,MAAM;IAAEM,UAAU;IAAEC;EAAc,CAAC,GAAGhB,UAAU,CAACQ,WAAW,CAAC;EAC7D,MAAM;IAAES;EAAc,CAAC,GAAGP,SAAS,EAAE;EAErCC,eAAe,EAAE;;EAEjB;EACAV,SAAS,CAAC,MAAM;IACd,IAAI,CAACiB,YAAY,CAACC,QAAQ,IAAKL,MAAM,IAAI,CAACC,UAAW,EAAEF,QAAQ,CAAC,QAAQ,CAAC,CAAC,KACrEG,aAAa,CAAC,IAAI,CAAC;IACxB;EACF,CAAC,CAAC;;EAEF,oBACE;IACE,SAAS,EAAC,gEAAgE,CAAC;IAAA;IAC3E,WAAW,EAAEC,aAAc;IAC3B,SAAS,EAAEA,aAAc;IACzB,OAAO,EAAEA,aAAc;IACvB,MAAM,EAAEA,aAAc;IACtB,UAAU,EAAEA,aAAc;IAC1B,WAAW,EAAEA,aAAc;IAAA,WAE1B,CAACC,YAAY,CAACE,YAAY,iBAAI,QAAC,iBAAiB;MAAA;MAAA;MAAA;IAAA,QAAG,eACpD,QAAC,iBAAiB;MAAA;MAAA;MAAA;IAAA,QAAG,eACrB,QAAC,UAAU;MAAA;MAAA;MAAA;IAAA,QAAG,eACd,QAAC,SAAS;MAAA;MAAA;MAAA;IAAA,QAAG,eACb,QAAC,MAAM;MAAA;MAAA;MAAA;IAAA,QAAG;EAAA;IAAA;IAAA;IAAA;EAAA,QACL;AAEX;AAAC,GAhCQR,UAAU;EAAA,QACAV,WAAW,EAGFQ,SAAS,EAEnCC,eAAe;AAAA;AAAA,KANRC,UAAU;AAkCnB,eAAeA,UAAU;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}