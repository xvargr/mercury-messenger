{"ast":null,"code":"import _objectSpread from\"/home/agreus/Documents/webdev/mercury-messenger/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/agreus/Documents/webdev/mercury-messenger/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext,useEffect,useRef}from\"react\";import{useNavigate}from\"react-router-dom\";// context\nimport{DataContext}from\"../components/context/DataContext\";import{FlashContext}from\"../components/context/FlashContext\";// Ui\nimport ChannelBanner from\"../components/chat/ChatBanner\";import InputBox from\"../components/ui/InputBox\";import ImageSelectorPreview from\"../components/ui/ImageSelectorPreview\";import MemberOptions from\"../components/ui/MemberOptions\";import{ConfirmChangesModal}from\"../components/ui/Modal\";import{SkeletonMemberOptions}from\"../components/ui/SkeletonLoaders\";// utility hooks\nimport axiosInstance from\"../utils/axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function GroupSettingsPage(){var _useContext=useContext(DataContext),dataHelpers=_useContext.dataHelpers,dataReady=_useContext.dataReady,selectedGroup=_useContext.selectedGroup,setSelectedGroup=_useContext.setSelectedGroup,isAdmin=_useContext.isAdmin;var _useContext2=useContext(FlashContext),pushFlashMessage=_useContext2.pushFlashMessage;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showConfirmation=_useState2[0],setShowConfirmation=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),formIsPending=_useState4[0],setFormIsPending=_useState4[1];var _useState5=useState({name:\"\",image:null,users:{toPromote:[],toKick:[]}}),_useState6=_slicedToArray(_useState5,2),editForm=_useState6[0],setFormData=_useState6[1];var nameRef=useRef();var navigate=useNavigate();var _axiosInstance=axiosInstance(),userGroups=_axiosInstance.userGroups;useEffect(function(){if(selectedGroup){if(!isAdmin()){pushFlashMessage([{message:\"Access denied\",type:\"error\"}]);navigate(\"/\");}}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[selectedGroup]);var updateForm={name:function name(){setFormData(_objectSpread(_objectSpread({},editForm),{},{name:nameRef.current.value}));},image:function image(data){setFormData(_objectSpread(_objectSpread({},editForm),{},{image:data}));},toKick:function toKick(userId){// if user already in other action array, remove from that arr\nif(editForm.users.toPromote.includes(userId)){setFormData(function(prevData){prevData.users.toPromote=prevData.users.toPromote.filter(function(user){return user!==userId;});return _objectSpread({},prevData);});}// then if not in this action's array, add them.\n// if already in this action's arr, remove them, basically a toggle\nsetFormData(function(prevData){if(!editForm.users.toKick.includes(userId)){prevData.users.toKick.push(userId);}else{prevData.users.toKick=prevData.users.toKick.filter(function(id){return id!==userId;});}return _objectSpread({},prevData);});},toPromote:function toPromote(userId){if(editForm.users.toKick.includes(userId)){setFormData(function(prevData){prevData.users.toKick=prevData.users.toKick.filter(function(user){return user!==userId;});return _objectSpread({},prevData);});}setFormData(function(prevData){if(!editForm.users.toPromote.includes(userId)){prevData.users.toPromote.push(userId);}else{prevData.users.toPromote=prevData.users.toPromote.filter(function(id){return id!==userId;});}return _objectSpread({},prevData);});},revertFields:function revertFields(){nameRef.current.value=selectedGroup.name;setFormData({name:selectedGroup.name,image:null,users:{toPromote:[],toKick:[]}});},nameChanged:function nameChanged(){return editForm.name.length>0&&editForm.name!==selectedGroup.name;},imageChanged:function imageChanged(){return editForm.image!==null;},usersChanged:function usersChanged(){return editForm.users.toKick.length>0||editForm.users.toPromote.length>0;},hasChanges:function hasChanges(){return updateForm.nameChanged()||updateForm.imageChanged()||updateForm.usersChanged();}};// detect if changes are made, show confirmation modal if true\nuseEffect(function(){if(selectedGroup){if(updateForm.hasChanges()){setShowConfirmation(true);}else{setShowConfirmation(false);}}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[editForm]);function submitGroupEdit(e){e.preventDefault();if(updateForm.hasChanges()){setFormIsPending(true);var formData=new FormData();if(updateForm.nameChanged()){formData.append(\"name\",editForm.name);}if(updateForm.imageChanged()){formData.append(\"file\",editForm.image);}if(updateForm.usersChanged()){if(editForm.users.toKick.length>0){formData.append(\"toKick\",editForm.users.toKick);}if(editForm.users.toPromote.length>0){formData.append(\"toPromote\",editForm.users.toPromote);}}userGroups.edit(selectedGroup._id,formData).then(function(res){dataHelpers.patchGroup(res.data.group);setSelectedGroup(res.data.group);pushFlashMessage(res.data.messages);updateForm.revertFields();setFormIsPending(false);navigate(\"/g/\".concat(res.data.group.name));}).catch(function(err){// console.log(err);\nif(err.response)pushFlashMessage(err.response.data.messages);// network err has no response key\nsetFormIsPending(false);});}}var renderCards={memberCards:function memberCards(){var adminIds=selectedGroup.administrators.map(function(admin){return admin._id;});var reducedMembers=selectedGroup.members.filter(function(member){return!adminIds.includes(member._id);});return reducedMembers.map(function(member){return/*#__PURE__*/_jsx(MemberOptions,{memberData:member,isAdmin:false,promoteEvent:updateForm.toPromote,kickEvent:updateForm.toKick,selected:editForm.users.toKick.includes(member._id)?\"kick\":editForm.users.toPromote.includes(member._id)?\"promote\":false},member._id);});},adminCards:function adminCards(){var adminIds=selectedGroup.administrators.map(function(admin){return admin._id;});var reducedMembers=selectedGroup.members.filter(function(member){return adminIds.includes(member._id);});return reducedMembers.map(function(member){return/*#__PURE__*/_jsx(MemberOptions,{memberData:member,isAdmin:true},member._id);});}};if(!dataReady){return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full h-full flex-grow min-w-0 bg-gray-600 overflow-x-hidden flex flex-col fixed right-0 top-0 md:relative\",children:[/*#__PURE__*/_jsx(ChannelBanner,{pending:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full h-full flex flex-col items-center overflow-y-auto scrollbar-dark\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row max-w-4xl w-full h-80 justify-evenly items-center mb-6 mt-12 shrink-0\",children:[/*#__PURE__*/_jsx(ImageSelectorPreview,{loading:true}),/*#__PURE__*/_jsxs(\"label\",{className:\"text-lg mt-2 lg:mt-0 font-medium text-gray-400\",children:[\"Group Name:\",/*#__PURE__*/_jsx(InputBox,{className:\"bg-gray-800 p-4 group hover:bg-gray-700 animate-pulse\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-80 h-4 bg-gray-800 text-gray-300 group-hover:bg-gray-700 transition-colors duration-75 ease-in font-normal focus:outline-none animate-pulse\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center max-w-4xl w-11/12 h-80 m-4 shrink-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-medium text-gray-400\",children:\"Members\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 rounded-md w-full p-2 pb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-medium text-gray-400\",children:\"Administrators\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full flex flex-col items-center lg:flex-row lg:flex-wrap lg:justify-evenly\",children:[/*#__PURE__*/_jsx(SkeletonMemberOptions,{}),/*#__PURE__*/_jsx(SkeletonMemberOptions,{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-medium text-gray-400\",children:\"Members\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full flex flex-col items-center lg:flex-row lg:flex-wrap lg:justify-evenly\",children:[/*#__PURE__*/_jsx(SkeletonMemberOptions,{}),/*#__PURE__*/_jsx(SkeletonMemberOptions,{})]})]})]})]})]});}else{return/*#__PURE__*/ (// <div className=\"w-full flex flex-col bg-gray-600 items-center relative\">\n_jsxs(\"div\",{className:\"w-full h-full flex-grow min-w-0 bg-gray-600 overflow-x-hidden flex flex-col fixed right-0 top-0 md:relative\",children:[/*#__PURE__*/_jsx(ChannelBanner,{name:\"settings\"}),/*#__PURE__*/_jsx(ConfirmChangesModal,{show:showConfirmation||formIsPending,onAccept:submitGroupEdit,onReject:updateForm.revertFields,pending:formIsPending}),/*#__PURE__*/_jsxs(\"form\",{className:\"w-full h-full flex flex-col items-center overflow-y-auto scrollbar-dark\",onSubmit:submitGroupEdit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row max-w-4xl w-full h-80 justify-evenly items-center mb-6 mt-12 shrink-0\",children:[/*#__PURE__*/_jsx(ImageSelectorPreview,{imageSrc:selectedGroup.image.url,passData:updateForm.image,showOriginal:editForm.image===null}),/*#__PURE__*/_jsxs(\"label\",{className:\"text-lg mt-2 lg:mt-0 font-medium text-gray-400\",children:[\"Group Name:\",/*#__PURE__*/_jsx(InputBox,{className:\"bg-gray-800 p-4 group hover:bg-gray-700\",transferFocus:function transferFocus(e){var _e$target$children$na;return(_e$target$children$na=e.target.children.name)===null||_e$target$children$na===void 0?void 0:_e$target$children$na.focus();},children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",className:\"w-80 bg-gray-800 text-gray-300 group-hover:bg-gray-700 transition-colors duration-75 ease-in font-normal focus:outline-none\",placeholder:\"...\",defaultValue:selectedGroup.name,onChange:updateForm.name,ref:nameRef})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center max-w-4xl w-11/12 h-80 m-4 shrink-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-medium text-gray-400\",children:\"Members\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 rounded-md w-full p-2 pb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-medium text-gray-400\",children:\"Administrators\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full flex flex-col items-center lg:flex-row lg:flex-wrap lg:justify-evenly\",children:renderCards.adminCards()}),/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-medium text-gray-400\",children:\"Members\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full flex flex-col items-center lg:flex-row lg:flex-wrap lg:justify-evenly\",children:renderCards.memberCards()})]})]})]})]}));}}export default GroupSettingsPage;","map":{"version":3,"names":["useState","useContext","useEffect","useRef","useNavigate","DataContext","FlashContext","ChannelBanner","InputBox","ImageSelectorPreview","MemberOptions","ConfirmChangesModal","SkeletonMemberOptions","axiosInstance","GroupSettingsPage","dataHelpers","dataReady","selectedGroup","setSelectedGroup","isAdmin","pushFlashMessage","showConfirmation","setShowConfirmation","formIsPending","setFormIsPending","name","image","users","toPromote","toKick","editForm","setFormData","nameRef","navigate","userGroups","message","type","updateForm","current","value","data","userId","includes","prevData","filter","user","push","id","revertFields","nameChanged","length","imageChanged","usersChanged","hasChanges","submitGroupEdit","e","preventDefault","formData","FormData","append","edit","_id","then","res","patchGroup","group","messages","catch","err","response","renderCards","memberCards","adminIds","administrators","map","admin","reducedMembers","members","member","adminCards","url","target","children","focus"],"sources":["/home/agreus/Documents/webdev/mercury-messenger/client/src/pages/GroupSettings.js"],"sourcesContent":["import { useState, useContext, useEffect, useRef } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\n// context\nimport { DataContext } from \"../components/context/DataContext\";\nimport { FlashContext } from \"../components/context/FlashContext\";\n\n// Ui\nimport ChannelBanner from \"../components/chat/ChatBanner\";\nimport InputBox from \"../components/ui/InputBox\";\nimport ImageSelectorPreview from \"../components/ui/ImageSelectorPreview\";\nimport MemberOptions from \"../components/ui/MemberOptions\";\nimport { ConfirmChangesModal } from \"../components/ui/Modal\";\nimport { SkeletonMemberOptions } from \"../components/ui/SkeletonLoaders\";\n\n// utility hooks\nimport axiosInstance from \"../utils/axios\";\n\nfunction GroupSettingsPage() {\n  const { dataHelpers, dataReady, selectedGroup, setSelectedGroup, isAdmin } =\n    useContext(DataContext);\n  const { pushFlashMessage } = useContext(FlashContext);\n  const [showConfirmation, setShowConfirmation] = useState(false);\n  const [formIsPending, setFormIsPending] = useState(false);\n  const [editForm, setFormData] = useState({\n    name: \"\",\n    image: null,\n    users: {\n      toPromote: [],\n      toKick: [],\n    },\n  });\n  const nameRef = useRef();\n  const navigate = useNavigate();\n  const { userGroups } = axiosInstance();\n\n  useEffect(() => {\n    if (selectedGroup) {\n      if (!isAdmin()) {\n        pushFlashMessage([{ message: \"Access denied\", type: \"error\" }]);\n        navigate(\"/\");\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedGroup]);\n\n  const updateForm = {\n    name() {\n      setFormData({ ...editForm, name: nameRef.current.value });\n    },\n    image(data) {\n      setFormData({ ...editForm, image: data });\n    },\n    toKick(userId) {\n      // if user already in other action array, remove from that arr\n      if (editForm.users.toPromote.includes(userId)) {\n        setFormData((prevData) => {\n          prevData.users.toPromote = prevData.users.toPromote.filter(\n            (user) => user !== userId\n          );\n          return { ...prevData };\n        });\n      }\n      // then if not in this action's array, add them.\n      // if already in this action's arr, remove them, basically a toggle\n      setFormData((prevData) => {\n        if (!editForm.users.toKick.includes(userId)) {\n          prevData.users.toKick.push(userId);\n        } else {\n          prevData.users.toKick = prevData.users.toKick.filter(\n            (id) => id !== userId\n          );\n        }\n        return { ...prevData };\n      });\n    },\n    toPromote(userId) {\n      if (editForm.users.toKick.includes(userId)) {\n        setFormData((prevData) => {\n          prevData.users.toKick = prevData.users.toKick.filter(\n            (user) => user !== userId\n          );\n          return { ...prevData };\n        });\n      }\n      setFormData((prevData) => {\n        if (!editForm.users.toPromote.includes(userId)) {\n          prevData.users.toPromote.push(userId);\n        } else {\n          prevData.users.toPromote = prevData.users.toPromote.filter(\n            (id) => id !== userId\n          );\n        }\n        return { ...prevData };\n      });\n    },\n    revertFields() {\n      nameRef.current.value = selectedGroup.name;\n      setFormData({\n        name: selectedGroup.name,\n        image: null,\n        users: {\n          toPromote: [],\n          toKick: [],\n        },\n      });\n    },\n    nameChanged() {\n      return editForm.name.length > 0 && editForm.name !== selectedGroup.name;\n    },\n    imageChanged() {\n      return editForm.image !== null;\n    },\n    usersChanged() {\n      return (\n        editForm.users.toKick.length > 0 || editForm.users.toPromote.length > 0\n      );\n    },\n    hasChanges() {\n      return (\n        updateForm.nameChanged() ||\n        updateForm.imageChanged() ||\n        updateForm.usersChanged()\n      );\n    },\n  };\n\n  // detect if changes are made, show confirmation modal if true\n  useEffect(() => {\n    if (selectedGroup) {\n      if (updateForm.hasChanges()) {\n        setShowConfirmation(true);\n      } else {\n        setShowConfirmation(false);\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editForm]);\n\n  function submitGroupEdit(e) {\n    e.preventDefault();\n    if (updateForm.hasChanges()) {\n      setFormIsPending(true);\n\n      const formData = new FormData();\n      if (updateForm.nameChanged()) {\n        formData.append(\"name\", editForm.name);\n      }\n      if (updateForm.imageChanged()) {\n        formData.append(\"file\", editForm.image);\n      }\n      if (updateForm.usersChanged()) {\n        if (editForm.users.toKick.length > 0) {\n          formData.append(\"toKick\", editForm.users.toKick);\n        }\n        if (editForm.users.toPromote.length > 0) {\n          formData.append(\"toPromote\", editForm.users.toPromote);\n        }\n      }\n\n      userGroups\n        .edit(selectedGroup._id, formData)\n        .then((res) => {\n          dataHelpers.patchGroup(res.data.group);\n          setSelectedGroup(res.data.group);\n          pushFlashMessage(res.data.messages);\n\n          updateForm.revertFields();\n          setFormIsPending(false);\n          navigate(`/g/${res.data.group.name}`);\n        })\n        .catch((err) => {\n          // console.log(err);\n          if (err.response) pushFlashMessage(err.response.data.messages); // network err has no response key\n          setFormIsPending(false);\n        });\n    }\n  }\n\n  const renderCards = {\n    memberCards() {\n      const adminIds = selectedGroup.administrators.map((admin) => admin._id);\n      const reducedMembers = selectedGroup.members.filter(\n        (member) => !adminIds.includes(member._id)\n      );\n      return reducedMembers.map((member) => (\n        <MemberOptions\n          memberData={member}\n          isAdmin={false}\n          promoteEvent={updateForm.toPromote}\n          kickEvent={updateForm.toKick}\n          selected={\n            editForm.users.toKick.includes(member._id)\n              ? \"kick\"\n              : editForm.users.toPromote.includes(member._id)\n              ? \"promote\"\n              : false\n          }\n          key={member._id}\n        />\n      ));\n    },\n    adminCards() {\n      const adminIds = selectedGroup.administrators.map((admin) => admin._id);\n      const reducedMembers = selectedGroup.members.filter((member) =>\n        adminIds.includes(member._id)\n      );\n      return reducedMembers.map((member) => (\n        <MemberOptions memberData={member} isAdmin={true} key={member._id} />\n      ));\n    },\n  };\n\n  if (!dataReady) {\n    return (\n      <div className=\"w-full h-full flex-grow min-w-0 bg-gray-600 overflow-x-hidden flex flex-col fixed right-0 top-0 md:relative\">\n        <ChannelBanner pending />\n        <div className=\"w-full h-full flex flex-col items-center overflow-y-auto scrollbar-dark\">\n          <div className=\"flex flex-col lg:flex-row max-w-4xl w-full h-80 justify-evenly items-center mb-6 mt-12 shrink-0\">\n            <ImageSelectorPreview loading />\n            <label className=\"text-lg mt-2 lg:mt-0 font-medium text-gray-400\">\n              Group Name:\n              <InputBox className=\"bg-gray-800 p-4 group hover:bg-gray-700 animate-pulse\">\n                <div className=\"w-80 h-4 bg-gray-800 text-gray-300 group-hover:bg-gray-700 transition-colors duration-75 ease-in font-normal focus:outline-none animate-pulse\"></div>\n              </InputBox>\n            </label>\n          </div>\n\n          <div className=\"flex flex-col items-center max-w-4xl w-11/12 h-80 m-4 shrink-0\">\n            <div className=\"text-lg font-medium text-gray-400\">Members</div>\n            <div className=\"bg-gray-800 rounded-md w-full p-2 pb-6\">\n              <div className=\"text-lg font-medium text-gray-400\">\n                Administrators\n              </div>\n              <div className=\"w-full flex flex-col items-center lg:flex-row lg:flex-wrap lg:justify-evenly\">\n                <SkeletonMemberOptions />\n                <SkeletonMemberOptions />\n              </div>\n              <div className=\"text-lg font-medium text-gray-400\">Members</div>\n              <div className=\"w-full flex flex-col items-center lg:flex-row lg:flex-wrap lg:justify-evenly\">\n                <SkeletonMemberOptions />\n                <SkeletonMemberOptions />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  } else {\n    return (\n      // <div className=\"w-full flex flex-col bg-gray-600 items-center relative\">\n      <div className=\"w-full h-full flex-grow min-w-0 bg-gray-600 overflow-x-hidden flex flex-col fixed right-0 top-0 md:relative\">\n        <ChannelBanner name={\"settings\"} />\n        <ConfirmChangesModal\n          show={showConfirmation || formIsPending}\n          onAccept={submitGroupEdit}\n          onReject={updateForm.revertFields}\n          pending={formIsPending}\n        />\n        <form\n          className=\"w-full h-full flex flex-col items-center overflow-y-auto scrollbar-dark\"\n          onSubmit={submitGroupEdit}\n        >\n          <div className=\"flex flex-col lg:flex-row max-w-4xl w-full h-80 justify-evenly items-center mb-6 mt-12 shrink-0\">\n            <ImageSelectorPreview\n              imageSrc={selectedGroup.image.url}\n              passData={updateForm.image}\n              showOriginal={editForm.image === null}\n            />\n            <label className=\"text-lg mt-2 lg:mt-0 font-medium text-gray-400\">\n              Group Name:\n              <InputBox\n                className=\"bg-gray-800 p-4 group hover:bg-gray-700\"\n                transferFocus={(e) => e.target.children.name?.focus()}\n              >\n                <input\n                  type=\"text\"\n                  name=\"name\"\n                  className=\"w-80 bg-gray-800 text-gray-300 group-hover:bg-gray-700 transition-colors duration-75 ease-in font-normal focus:outline-none\"\n                  placeholder=\"...\"\n                  defaultValue={selectedGroup.name}\n                  onChange={updateForm.name}\n                  ref={nameRef}\n                />\n              </InputBox>\n            </label>\n          </div>\n\n          <div className=\"flex flex-col items-center max-w-4xl w-11/12 h-80 m-4 shrink-0\">\n            <div className=\"text-lg font-medium text-gray-400\">Members</div>\n            <div className=\"bg-gray-800 rounded-md w-full p-2 pb-6\">\n              <div className=\"text-lg font-medium text-gray-400\">\n                Administrators\n              </div>\n              <div className=\"w-full flex flex-col items-center lg:flex-row lg:flex-wrap lg:justify-evenly\">\n                {renderCards.adminCards()}\n              </div>\n              <div className=\"text-lg font-medium text-gray-400\">Members</div>\n              <div className=\"w-full flex flex-col items-center lg:flex-row lg:flex-wrap lg:justify-evenly\">\n                {renderCards.memberCards()}\n              </div>\n            </div>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default GroupSettingsPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}