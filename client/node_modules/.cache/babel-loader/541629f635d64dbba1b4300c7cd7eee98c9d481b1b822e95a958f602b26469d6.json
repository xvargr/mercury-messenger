{"ast":null,"code":"import _slicedToArray from\"/home/agreus/Documents/webdev/mercury-messenger/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";// import ui\nimport CardFloat from\"../ui/CardFloat\";import CircleButton from\"../ui/CircleButton\";// global vars\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var groupNameInput;var groupImageInput;function NewGroupForm(props){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),inpErr=_useState2[0],setInpErr=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),feedback=_useState4[0],setFeedback=_useState4[1];var _useState5=useState(\"error\"),_useState6=_slicedToArray(_useState5,2),buttonStatus=_useState6[0],setButtonStatus=_useState6[1];useEffect(function(){if(props.err.message&&feedback!==props.err.message){setFeedback(props.err.message);setButtonStatus(\"error\");setInpErr(true);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[props.err]);function onChangeHandler(e){if(e.target.type===\"text\"){groupNameInput=e.target.value.trim();}else if(e.target.type===\"file\"){groupImageInput=e.target.files[0];}function giveError(feedback){setInpErr(true);setButtonStatus(\"error\");setFeedback(feedback);}if(!groupNameInput){giveError(\"A name is required\");}else if(/[^\\w\\d ]+/.test(groupNameInput)){giveError(\"Name cannot contain special characters\");}else if(groupNameInput.length<3){giveError(\"Name must be at least 3 characters\");}else if(groupNameInput.length>20){giveError(\"Name must not be more than 20 characters\");}else if(!groupImageInput){giveError(\"An image is required\");}else if(groupImageInput.size>3e6){giveError(\"Image exceeds 3MB\");}else{setInpErr(false);setFeedback(\"Looks good\");setButtonStatus(\"ok\");}}function submitHandler(e){e.preventDefault();if(!inpErr){setButtonStatus(\"submitted\");setFeedback(\"Uploading...\");var newGroup={name:groupNameInput,image:groupImageInput};props.onNewGroup(newGroup);// run passed func on parent\n}}return/*#__PURE__*/_jsxs(CardFloat,{className:\"w-full md:w-3/4 md:max-w-2xl\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-mexican-red-600 mb-2 font-montserrat font-semibold\",children:\"New Group\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"flex flex-col\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"label\",{className:\"mb-2 text-lg font-medium text-gray-400\",children:[\"Group Name\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"group[name]\",placeholder:\"...\",autoComplete:\"off\",className:\"bg-gray-700 p-2 m-1 w-full rounded-md text-sm drop-shadow-md text-grey-500 file:mr-5 file:py-2 file:px-10 file:rounded-md file:border-0 file:text-md file:font-semibold file:text-gray-300 file:bg-gray-500 hover:file:cursor-pointer hover:file:opacity-80 hover:bg-gray-600 transition-colors duration-75 ease-in outline-none\",required:true,onChange:onChangeHandler})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"mb-2 mt-1 text-lg font-medium text-gray-400\",children:[\"Image\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"group[image]\",className:\"bg-gray-700 p-2 m-1 mb-0 w-full rounded-md text-sm drop-shadow-md text-grey-500 file:mr-5 file:py-2 file:px-10 file:rounded-md file:border-0 file:text-md file:font-semibold file:text-gray-300 file:bg-gray-500 hover:file:cursor-pointer hover:file:opacity-80 outline-none\",accept:\".jpg, .jpeg, .png, .gif\",required:true,onChange:onChangeHandler}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm mt-0 my-1\",children:\".JPG, .JPEG, or .PNG (max 3MB)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mt-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-full w-5/6 p-2 pl-0\",children:feedback}),/*#__PURE__*/_jsx(CircleButton,{className:\"h-10\",status:buttonStatus})]})]})]});}export default NewGroupForm;","map":{"version":3,"names":["useState","useEffect","CardFloat","CircleButton","groupNameInput","groupImageInput","NewGroupForm","props","inpErr","setInpErr","feedback","setFeedback","buttonStatus","setButtonStatus","err","message","onChangeHandler","e","target","type","value","trim","files","giveError","test","length","size","submitHandler","preventDefault","newGroup","name","image","onNewGroup"],"sources":["/home/agreus/Documents/webdev/mercury-messenger/client/src/components/forms/NewGroupForm.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\n// import ui\nimport CardFloat from \"../ui/CardFloat\";\nimport CircleButton from \"../ui/CircleButton\";\n// global vars\nlet groupNameInput;\nlet groupImageInput;\n\nfunction NewGroupForm(props) {\n  const [inpErr, setInpErr] = useState(true);\n  const [feedback, setFeedback] = useState(\"\");\n  const [buttonStatus, setButtonStatus] = useState(\"error\");\n\n  useEffect(() => {\n    if (props.err.message && feedback !== props.err.message) {\n      setFeedback(props.err.message);\n      setButtonStatus(\"error\");\n      setInpErr(true);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.err]);\n\n  function onChangeHandler(e) {\n    if (e.target.type === \"text\") {\n      groupNameInput = e.target.value.trim();\n    } else if (e.target.type === \"file\") {\n      groupImageInput = e.target.files[0];\n    }\n\n    function giveError(feedback) {\n      setInpErr(true);\n      setButtonStatus(\"error\");\n      setFeedback(feedback);\n    }\n\n    if (!groupNameInput) {\n      giveError(\"A name is required\");\n    } else if (/[^\\w\\d ]+/.test(groupNameInput)) {\n      giveError(\"Name cannot contain special characters\");\n    } else if (groupNameInput.length < 3) {\n      giveError(\"Name must be at least 3 characters\");\n    } else if (groupNameInput.length > 20) {\n      giveError(\"Name must not be more than 20 characters\");\n    } else if (!groupImageInput) {\n      giveError(\"An image is required\");\n    } else if (groupImageInput.size > 3e6) {\n      giveError(\"Image exceeds 3MB\");\n    } else {\n      setInpErr(false);\n      setFeedback(\"Looks good\");\n      setButtonStatus(\"ok\");\n    }\n  }\n\n  function submitHandler(e) {\n    e.preventDefault();\n    if (!inpErr) {\n      setButtonStatus(\"submitted\");\n      setFeedback(\"Uploading...\");\n      const newGroup = {\n        name: groupNameInput,\n        image: groupImageInput,\n      };\n      props.onNewGroup(newGroup); // run passed func on parent\n    }\n  }\n\n  return (\n    <CardFloat className=\"w-full md:w-3/4 md:max-w-2xl\">\n      <div className=\"text-mexican-red-600 mb-2 font-montserrat font-semibold\">\n        New Group\n      </div>\n      <form className=\"flex flex-col\" onSubmit={submitHandler}>\n        <label className=\"mb-2 text-lg font-medium text-gray-400\">\n          Group Name\n          <input\n            type=\"text\"\n            name=\"group[name]\"\n            placeholder=\"...\"\n            autoComplete=\"off\"\n            className=\"bg-gray-700 p-2 m-1 w-full rounded-md text-sm drop-shadow-md text-grey-500 file:mr-5 file:py-2 file:px-10 file:rounded-md file:border-0 file:text-md file:font-semibold file:text-gray-300 file:bg-gray-500 hover:file:cursor-pointer hover:file:opacity-80 hover:bg-gray-600 transition-colors duration-75 ease-in outline-none\"\n            required\n            onChange={onChangeHandler}\n          />\n        </label>\n        <label className=\"mb-2 mt-1 text-lg font-medium text-gray-400\">\n          Image\n          <input\n            type=\"file\"\n            name=\"group[image]\"\n            className=\"bg-gray-700 p-2 m-1 mb-0 w-full rounded-md text-sm drop-shadow-md text-grey-500 file:mr-5 file:py-2 file:px-10 file:rounded-md file:border-0 file:text-md file:font-semibold file:text-gray-300 file:bg-gray-500 hover:file:cursor-pointer hover:file:opacity-80 outline-none\"\n            accept=\".jpg, .jpeg, .png, .gif\"\n            required\n            onChange={onChangeHandler}\n          />\n          <span className=\"text-sm mt-0 my-1\">\n            .JPG, .JPEG, or .PNG (max 3MB)\n          </span>\n        </label>\n        <div className=\"flex justify-between mt-2\">\n          <div className=\"h-full w-5/6 p-2 pl-0\">{feedback}</div>\n          <CircleButton className=\"h-10\" status={buttonStatus}></CircleButton>\n        </div>\n      </form>\n    </CardFloat>\n  );\n}\n\nexport default NewGroupForm;\n"],"mappings":"4IAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C;AACA,MAAOC,UAAS,KAAM,iBAAiB,CACvC,MAAOC,aAAY,KAAM,oBAAoB,CAC7C;AAAA,wFACA,GAAIC,eAAc,CAClB,GAAIC,gBAAe,CAEnB,QAASC,aAAY,CAACC,KAAK,CAAE,CAC3B,cAA4BP,QAAQ,CAAC,IAAI,CAAC,wCAAnCQ,MAAM,eAAEC,SAAS,eACxB,eAAgCT,QAAQ,CAAC,EAAE,CAAC,yCAArCU,QAAQ,eAAEC,WAAW,eAC5B,eAAwCX,QAAQ,CAAC,OAAO,CAAC,yCAAlDY,YAAY,eAAEC,eAAe,eAEpCZ,SAAS,CAAC,UAAM,CACd,GAAIM,KAAK,CAACO,GAAG,CAACC,OAAO,EAAIL,QAAQ,GAAKH,KAAK,CAACO,GAAG,CAACC,OAAO,CAAE,CACvDJ,WAAW,CAACJ,KAAK,CAACO,GAAG,CAACC,OAAO,CAAC,CAC9BF,eAAe,CAAC,OAAO,CAAC,CACxBJ,SAAS,CAAC,IAAI,CAAC,CACjB,CACA;AACF,CAAC,CAAE,CAACF,KAAK,CAACO,GAAG,CAAC,CAAC,CAEf,QAASE,gBAAe,CAACC,CAAC,CAAE,CAC1B,GAAIA,CAAC,CAACC,MAAM,CAACC,IAAI,GAAK,MAAM,CAAE,CAC5Bf,cAAc,CAAGa,CAAC,CAACC,MAAM,CAACE,KAAK,CAACC,IAAI,EAAE,CACxC,CAAC,IAAM,IAAIJ,CAAC,CAACC,MAAM,CAACC,IAAI,GAAK,MAAM,CAAE,CACnCd,eAAe,CAAGY,CAAC,CAACC,MAAM,CAACI,KAAK,CAAC,CAAC,CAAC,CACrC,CAEA,QAASC,UAAS,CAACb,QAAQ,CAAE,CAC3BD,SAAS,CAAC,IAAI,CAAC,CACfI,eAAe,CAAC,OAAO,CAAC,CACxBF,WAAW,CAACD,QAAQ,CAAC,CACvB,CAEA,GAAI,CAACN,cAAc,CAAE,CACnBmB,SAAS,CAAC,oBAAoB,CAAC,CACjC,CAAC,IAAM,IAAI,WAAW,CAACC,IAAI,CAACpB,cAAc,CAAC,CAAE,CAC3CmB,SAAS,CAAC,wCAAwC,CAAC,CACrD,CAAC,IAAM,IAAInB,cAAc,CAACqB,MAAM,CAAG,CAAC,CAAE,CACpCF,SAAS,CAAC,oCAAoC,CAAC,CACjD,CAAC,IAAM,IAAInB,cAAc,CAACqB,MAAM,CAAG,EAAE,CAAE,CACrCF,SAAS,CAAC,0CAA0C,CAAC,CACvD,CAAC,IAAM,IAAI,CAAClB,eAAe,CAAE,CAC3BkB,SAAS,CAAC,sBAAsB,CAAC,CACnC,CAAC,IAAM,IAAIlB,eAAe,CAACqB,IAAI,CAAG,GAAG,CAAE,CACrCH,SAAS,CAAC,mBAAmB,CAAC,CAChC,CAAC,IAAM,CACLd,SAAS,CAAC,KAAK,CAAC,CAChBE,WAAW,CAAC,YAAY,CAAC,CACzBE,eAAe,CAAC,IAAI,CAAC,CACvB,CACF,CAEA,QAASc,cAAa,CAACV,CAAC,CAAE,CACxBA,CAAC,CAACW,cAAc,EAAE,CAClB,GAAI,CAACpB,MAAM,CAAE,CACXK,eAAe,CAAC,WAAW,CAAC,CAC5BF,WAAW,CAAC,cAAc,CAAC,CAC3B,GAAMkB,SAAQ,CAAG,CACfC,IAAI,CAAE1B,cAAc,CACpB2B,KAAK,CAAE1B,eACT,CAAC,CACDE,KAAK,CAACyB,UAAU,CAACH,QAAQ,CAAC,CAAE;AAC9B,CACF,CAEA,mBACE,MAAC,SAAS,EAAC,SAAS,CAAC,8BAA8B,wBACjD,YAAK,SAAS,CAAC,yDAAyD,uBAElE,cACN,cAAM,SAAS,CAAC,eAAe,CAAC,QAAQ,CAAEF,aAAc,wBACtD,eAAO,SAAS,CAAC,wCAAwC,qCAEvD,cACE,IAAI,CAAC,MAAM,CACX,IAAI,CAAC,aAAa,CAClB,WAAW,CAAC,KAAK,CACjB,YAAY,CAAC,KAAK,CAClB,SAAS,CAAC,kUAAkU,CAC5U,QAAQ,MACR,QAAQ,CAAEX,eAAgB,EAC1B,GACI,cACR,eAAO,SAAS,CAAC,6CAA6C,gCAE5D,cACE,IAAI,CAAC,MAAM,CACX,IAAI,CAAC,cAAc,CACnB,SAAS,CAAC,+QAA+Q,CACzR,MAAM,CAAC,yBAAyB,CAChC,QAAQ,MACR,QAAQ,CAAEA,eAAgB,EAC1B,cACF,aAAM,SAAS,CAAC,mBAAmB,4CAE5B,GACD,cACR,aAAK,SAAS,CAAC,2BAA2B,wBACxC,YAAK,SAAS,CAAC,uBAAuB,UAAEN,QAAQ,EAAO,cACvD,KAAC,YAAY,EAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAEE,YAAa,EAAgB,GAChE,GACD,GACG,CAEhB,CAEA,cAAeN,aAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}