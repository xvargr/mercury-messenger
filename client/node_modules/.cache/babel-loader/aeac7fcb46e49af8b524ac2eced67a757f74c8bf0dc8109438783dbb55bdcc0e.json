{"ast":null,"code":"import{React,useContext,useEffect}from\"react\";import{useNavigate,Outlet}from\"react-router-dom\";// components\nimport GroupsBar from\"../components/layout/GroupsBar\";import{FlashStack}from\"../utils/iterableComponents\";// ui\nimport{IntroductionModal,ReconnectingModal}from\"../components/ui/Modal\";// context\nimport{DataContext}from\"../components/context/DataContext\";import{SocketContext}from\"../components/context/SocketContext\";// utility\nimport useSocket from\"../utils/socket\";import useStateRestore from\"../utils/restoreState\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MainWindow(){var navigate=useNavigate();var _useContext=useContext(SocketContext),socket=_useContext.socket;var _useContext2=useContext(DataContext),isLoggedIn=_useContext2.isLoggedIn,setIsLoggedIn=_useContext2.setIsLoggedIn;var _useSocket=useSocket(),statusUpdater=_useSocket.statusUpdater;useStateRestore();// redirect to login if not logged in\nuseEffect(function(){if(!localStorage.username||socket&&!isLoggedIn)navigate(\"/login\");else setIsLoggedIn(true);// eslint-disable-next-line react-hooks/exhaustive-deps\n});return/*#__PURE__*/_jsxs(\"main\",{className:\"w-screen font-nunito flex justify-center bgHeroTopo fullscreen\"// see tailwind base\n,onMouseMove:statusUpdater,onKeyDown:statusUpdater,onClick:statusUpdater,onLoad:statusUpdater,onTouchEnd:statusUpdater,onTouchMove:statusUpdater,children:[!localStorage.introduction||/*#__PURE__*/_jsx(IntroductionModal,{}),/*#__PURE__*/_jsx(ReconnectingModal,{}),/*#__PURE__*/_jsx(FlashStack,{}),/*#__PURE__*/_jsx(GroupsBar,{}),/*#__PURE__*/_jsx(Outlet,{})]});}export default MainWindow;","map":{"version":3,"names":["React","useContext","useEffect","useNavigate","Outlet","GroupsBar","FlashStack","IntroductionModal","ReconnectingModal","DataContext","SocketContext","useSocket","useStateRestore","MainWindow","navigate","socket","isLoggedIn","setIsLoggedIn","statusUpdater","localStorage","username","introduction"],"sources":["/home/agreus/Documents/webdev/mercury-messenger/client/src/pages/MainWindow.js"],"sourcesContent":["import { React, useContext, useEffect } from \"react\";\nimport { useNavigate, Outlet } from \"react-router-dom\";\n\n// components\nimport GroupsBar from \"../components/layout/GroupsBar\";\nimport { FlashStack } from \"../utils/iterableComponents\";\n\n// ui\nimport { IntroductionModal, ReconnectingModal } from \"../components/ui/Modal\";\n\n// context\nimport { DataContext } from \"../components/context/DataContext\";\nimport { SocketContext } from \"../components/context/SocketContext\";\n\n// utility\nimport useSocket from \"../utils/socket\";\nimport useStateRestore from \"../utils/restoreState\";\n\nfunction MainWindow() {\n  const navigate = useNavigate();\n  const { socket } = useContext(SocketContext);\n  const { isLoggedIn, setIsLoggedIn } = useContext(DataContext);\n  const { statusUpdater } = useSocket();\n\n  useStateRestore();\n\n  // redirect to login if not logged in\n  useEffect(() => {\n    if (!localStorage.username || (socket && !isLoggedIn)) navigate(\"/login\");\n    else setIsLoggedIn(true);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  });\n\n  return (\n    <main\n      className=\"w-screen font-nunito flex justify-center bgHeroTopo fullscreen\" // see tailwind base\n      onMouseMove={statusUpdater}\n      onKeyDown={statusUpdater}\n      onClick={statusUpdater}\n      onLoad={statusUpdater}\n      onTouchEnd={statusUpdater}\n      onTouchMove={statusUpdater}\n    >\n      {!localStorage.introduction || <IntroductionModal />}\n      <ReconnectingModal />\n      <FlashStack />\n      <GroupsBar />\n      <Outlet />\n    </main>\n  );\n}\n\nexport default MainWindow;\n"],"mappings":"AAAA,OAASA,KAAK,CAAEC,UAAU,CAAEC,SAAS,KAAQ,OAAO,CACpD,OAASC,WAAW,CAAEC,MAAM,KAAQ,kBAAkB,CAEtD;AACA,MAAOC,UAAS,KAAM,gCAAgC,CACtD,OAASC,UAAU,KAAQ,6BAA6B,CAExD;AACA,OAASC,iBAAiB,CAAEC,iBAAiB,KAAQ,wBAAwB,CAE7E;AACA,OAASC,WAAW,KAAQ,mCAAmC,CAC/D,OAASC,aAAa,KAAQ,qCAAqC,CAEnE;AACA,MAAOC,UAAS,KAAM,iBAAiB,CACvC,MAAOC,gBAAe,KAAM,uBAAuB,CAAC,wFAEpD,QAASC,WAAU,EAAG,CACpB,GAAMC,SAAQ,CAAGX,WAAW,EAAE,CAC9B,gBAAmBF,UAAU,CAACS,aAAa,CAAC,CAApCK,MAAM,aAANA,MAAM,CACd,iBAAsCd,UAAU,CAACQ,WAAW,CAAC,CAArDO,UAAU,cAAVA,UAAU,CAAEC,aAAa,cAAbA,aAAa,CACjC,eAA0BN,SAAS,EAAE,CAA7BO,aAAa,YAAbA,aAAa,CAErBN,eAAe,EAAE,CAEjB;AACAV,SAAS,CAAC,UAAM,CACd,GAAI,CAACiB,YAAY,CAACC,QAAQ,EAAKL,MAAM,EAAI,CAACC,UAAW,CAAEF,QAAQ,CAAC,QAAQ,CAAC,CAAC,IACrEG,cAAa,CAAC,IAAI,CAAC,CACxB;AACF,CAAC,CAAC,CAEF,mBACE,cACE,SAAS,CAAC,gEAAiE;AAAA,CAC3E,WAAW,CAAEC,aAAc,CAC3B,SAAS,CAAEA,aAAc,CACzB,OAAO,CAAEA,aAAc,CACvB,MAAM,CAAEA,aAAc,CACtB,UAAU,CAAEA,aAAc,CAC1B,WAAW,CAAEA,aAAc,WAE1B,CAACC,YAAY,CAACE,YAAY,eAAI,KAAC,iBAAiB,IAAG,cACpD,KAAC,iBAAiB,IAAG,cACrB,KAAC,UAAU,IAAG,cACd,KAAC,SAAS,IAAG,cACb,KAAC,MAAM,IAAG,GACL,CAEX,CAEA,cAAeR,WAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}