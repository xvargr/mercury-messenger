{"ast":null,"code":"import _defineProperty from\"/home/agreus/Documents/webdev/mercury-messenger/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/agreus/Documents/webdev/mercury-messenger/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/agreus/Documents/webdev/mercury-messenger/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useRef,useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{TwitterPicker}from\"react-color\";// Ui\nimport InputBox from\"../components/ui/InputBox\";import CircleButton from\"../components/ui/CircleButton\";import TextButton from\"../components/ui/TextButton\";import ImageSelectorPreview from\"../components/ui/ImageSelectorPreview\";import{DeleteUserModal}from\"../components/ui/Modal\";// context\nimport{DataContext}from\"../components/context/DataContext\";import{FlashContext}from\"../components/context/FlashContext\";import{SocketContext}from\"../components/context/SocketContext\";// utility hooks\nimport axiosInstance from\"../utils/axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function UserPage(){var navigate=useNavigate();var _useContext=useContext(DataContext),setIsLoggedIn=_useContext.setIsLoggedIn,setDataMounted=_useContext.setDataMounted,setChatMounted=_useContext.setChatMounted,dataReady=_useContext.dataReady;var _useContext2=useContext(FlashContext),pushFlashMessage=_useContext2.pushFlashMessage;var _useContext3=useContext(SocketContext),socketClear=_useContext3.socketClear;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),formState=_useState2[0],setFormState=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),deleteModalIsOpen=_useState4[0],setDeleteModalIsOpen=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),passwordFeedback=_useState6[0],setPasswordFeedback=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),passwordInput=_useState8[0],setPasswordInput=_useState8[1];var _useState9=useState({name:localStorage.username||\"\",image:null,color:null}),_useState10=_slicedToArray(_useState9,2),formData=_useState10[0],setFormData=_useState10[1];var nameInputRef=useRef();var colorPreviewRef=useRef();var _axiosInstance=axiosInstance(),userAccount=_axiosInstance.userAccount;useEffect(function(){if(nameInputRef.current){nameInputRef.current.value=localStorage.username;}},[dataReady]);useEffect(function(){var error={};if(formData.name!==null){if(formData.name.length<3||formData.name.length>20){error.nameError=\"username must be 3 to 20 characters\";}else if(/[^\\w\\d ]+/.test(formData.name)){error.nameError=\"username must not contain special characters\";}else if(formData.name===localStorage.username){if(!formData.color&&!formData.image)error.nameError=true;}else{error.nameError=false;}}if(formData.image){if(formData.image.size>3e6){error.imageError=\"image exceeds 3MB\";}else{error.imageError=false;}}setFormState({error:error.nameError||error.imageError?true:false,message:error.nameError||error.imageError});// eslint-disable-next-line\n},[formData]);function logOutUser(){userAccount.logOut().then(function(res){localStorage.clear();socketClear();setIsLoggedIn(false);setDataMounted(false);setChatMounted(false);navigate(\"/login\");}).catch(function(err){pushFlashMessage(err.response.data.messages);});}function deleteUser(e){e.preventDefault();if(passwordInput){var userData=new FormData();userData.append(\"password\",passwordInput);userAccount.delete(localStorage.userId,userData).then(function(res){localStorage.clear();socketClear();setIsLoggedIn(false);setIsLoggedIn(false);setDataMounted(false);setChatMounted(false);navigate(\"/login\");}).catch(function(err){return setPasswordFeedback(err.response.data.messages[0].message);});}else{setPasswordFeedback(\"ENTER YOUR PASSWORD\");}}function modifyUser(e){e.preventDefault();if(formState.error)return null;setFormState({error:false,pending:true,message:null});var userData=new FormData();if(formData.name)userData.append(\"name\",formData.name);if(formData.color)userData.append(\"color\",formData.color);if(formData.image)userData.append(\"file\",formData.image);userAccount.edit(localStorage.userId,userData).then(function(res){localStorage.setItem(\"username\",res.data.userData.username);localStorage.setItem(\"userImage\",res.data.userData.userImage);localStorage.setItem(\"userImageSmall\",res.data.userData.userImageSmall);localStorage.setItem(\"userImageMedium\",res.data.userData.userImageMedium);localStorage.setItem(\"userColor\",res.data.userData.userColor);pushFlashMessage(res.data.messages);navigate(\"/\");}).catch(function(err){setFormState({error:false,pending:false,message:null});pushFlashMessage(err.response.data.messages);});}function updateFormData(params){var e=params.e,data=params.data,type=params.type;function setNewValue(key,value){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},key,value)));}if(type===\"name\")setNewValue(type,e.target.value.trim());else if(type===\"image\")setNewValue(type,e);else if(type===\"color\"){setNewValue(type,data.hex);colorPreviewRef.current.style.backgroundColor=data.hex;}}function toggleDeleteModal(e){if(!deleteModalIsOpen)setDeleteModalIsOpen(true);if(e.type===\"keydown\"&&e.key===\"Escape\"){setDeleteModalIsOpen(false);setPasswordFeedback(null);}else if(e.type===\"click\"&&(e.target.id===\"modalBackground\"||e.target.id===\"modalCloseButton\"||e.target.parentElement.id===\"modalCloseButton\")){setDeleteModalIsOpen(false);setPasswordFeedback(null);}}function passwordOnChange(input){setPasswordInput(input);}if(!dataReady){return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-700 w-full h-full py-2 flex sm:items-center justify-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(ImageSelectorPreview,{loading:true}),/*#__PURE__*/_jsx(\"div\",{className:\"w-[16.5rem] sm:w-[16.9rem] h-10 mt-4 bg-gray-600 group hover:bg-gray-500 rounded-md animate-pulse relative\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-24 m-2 bg-gray-600 rounded-md animate-pulse\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-between absolute bottom-0\",children:[/*#__PURE__*/_jsx(CircleButton,{status:\"logout\",className:\"text-mexican-red-400 hover:text-mexican-red-500\",color:\"gray-600\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 text-gray-900 hover:cursor-pointer\",children:\"delete account\"})]})]});}else return/*#__PURE__*/_jsxs(_Fragment,{children:[deleteModalIsOpen?/*#__PURE__*/_jsx(DeleteUserModal,{toggle:toggleDeleteModal,onSubmit:deleteUser,sendBack:passwordOnChange,feedback:passwordFeedback}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-700 w-full py-2 flex sm:items-center justify-center\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"flex flex-col items-center\",onSubmit:modifyUser,children:[/*#__PURE__*/_jsx(ImageSelectorPreview,{imageSrc:localStorage.userImage,passData:function passData(e){return updateFormData({e:e,type:\"image\"});}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",className:\"sr-only\",children:\"username\"}),/*#__PURE__*/_jsxs(InputBox,{className:\"w-[16.5rem] sm:w-[16.9rem] mt-4 bg-gray-600 group hover:bg-gray-500 relative\",transferFocus:function transferFocus(e){var _e$target$children$us;return(_e$target$children$us=e.target.children.username)===null||_e$target$children$us===void 0?void 0:_e$target$children$us.focus();},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",id:\"username\",className:\"block w-full bg-gray-600 focus:outline-none text-center font-semibold text-gray-300 group-hover:bg-gray-500 transition-colors duration-75 ease-in\",onChange:function onChange(e){return updateFormData({e:e,type:\"name\"});},ref:nameInputRef,autoComplete:\"off\"}),/*#__PURE__*/_jsx(\"span\",{className:\"w-7 h-7 rounded-full border-2 border-gray-400 absolute right-0 top-0 m-1 hover:cursor-pointer\",style:{backgroundColor:\"\".concat(localStorage.userColor)},ref:colorPreviewRef})]}),/*#__PURE__*/_jsx(TwitterPicker,{color:localStorage.userColor,colors:[\"#e74645\",\"#fb7756\",\"#facd60\",\"#fdfa66\",\"#1ac0c6\",\"#072448\",\"#309975\",\"#bbd4ce\",\"#f9b4ab\",\"#d527b7\"],className:\"mt-1 mb-3 shadow-md picker-overwrite\",triangle:\"top-right\",onChange:function onChange(color,e){return updateFormData({e:e,data:color,type:\"color\"});}}),/*#__PURE__*/_jsx(TextButton,{text:formState.pending?\"processing...\":\"keep changes\",disabled:formState.error||formState.pending}),/*#__PURE__*/_jsx(\"div\",{className:\" h-4 mt-4 -mb-16 text-mexican-red-500 font-bold\",children:!formState.error||formState.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-between absolute bottom-0\",children:[/*#__PURE__*/_jsx(CircleButton,{status:\"logout\",className:\"text-mexican-red-400 hover:text-mexican-red-500\",color:\"gray-600\",onClick:logOutUser}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 text-gray-900 hover:cursor-pointer\",onClick:toggleDeleteModal,children:\"delete account\"})]})]})]});}export default UserPage;","map":{"version":3,"names":["useContext","useRef","useEffect","useState","useNavigate","TwitterPicker","InputBox","CircleButton","TextButton","ImageSelectorPreview","DeleteUserModal","DataContext","FlashContext","SocketContext","axiosInstance","UserPage","navigate","setIsLoggedIn","setDataMounted","setChatMounted","dataReady","pushFlashMessage","socketClear","formState","setFormState","deleteModalIsOpen","setDeleteModalIsOpen","passwordFeedback","setPasswordFeedback","passwordInput","setPasswordInput","name","localStorage","username","image","color","formData","setFormData","nameInputRef","colorPreviewRef","userAccount","current","value","error","length","nameError","test","size","imageError","message","logOutUser","logOut","then","res","clear","catch","err","response","data","messages","deleteUser","e","preventDefault","userData","FormData","append","delete","userId","modifyUser","pending","edit","setItem","userImage","userImageSmall","userImageMedium","userColor","updateFormData","params","type","setNewValue","key","target","trim","hex","style","backgroundColor","toggleDeleteModal","id","parentElement","passwordOnChange","input","children","focus"],"sources":["/home/agreus/Documents/webdev/mercury-messenger/client/src/pages/UserPage.js"],"sourcesContent":["import { useContext, useRef, useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { TwitterPicker } from \"react-color\";\n\n// Ui\nimport InputBox from \"../components/ui/InputBox\";\nimport CircleButton from \"../components/ui/CircleButton\";\nimport TextButton from \"../components/ui/TextButton\";\nimport ImageSelectorPreview from \"../components/ui/ImageSelectorPreview\";\nimport { DeleteUserModal } from \"../components/ui/Modal\";\n\n// context\nimport { DataContext } from \"../components/context/DataContext\";\nimport { FlashContext } from \"../components/context/FlashContext\";\nimport { SocketContext } from \"../components/context/SocketContext\";\n\n// utility hooks\nimport axiosInstance from \"../utils/axios\";\n\nfunction UserPage() {\n  const navigate = useNavigate();\n  const { setIsLoggedIn, setDataMounted, setChatMounted, dataReady } =\n    useContext(DataContext);\n  const { pushFlashMessage } = useContext(FlashContext);\n  const { socketClear } = useContext(SocketContext);\n\n  const [formState, setFormState] = useState({});\n  const [deleteModalIsOpen, setDeleteModalIsOpen] = useState(false);\n  const [passwordFeedback, setPasswordFeedback] = useState(null);\n  const [passwordInput, setPasswordInput] = useState(\"\");\n\n  const [formData, setFormData] = useState({\n    name: localStorage.username || \"\",\n    image: null,\n    color: null,\n  });\n\n  const nameInputRef = useRef();\n  const colorPreviewRef = useRef();\n\n  const { userAccount } = axiosInstance();\n\n  useEffect(() => {\n    if (nameInputRef.current) {\n      nameInputRef.current.value = localStorage.username;\n    }\n  }, [dataReady]);\n\n  useEffect(() => {\n    const error = {};\n\n    if (formData.name !== null) {\n      if (formData.name.length < 3 || formData.name.length > 20) {\n        error.nameError = \"username must be 3 to 20 characters\";\n      } else if (/[^\\w\\d ]+/.test(formData.name)) {\n        error.nameError = \"username must not contain special characters\";\n      } else if (formData.name === localStorage.username) {\n        if (!formData.color && !formData.image) error.nameError = true;\n      } else {\n        error.nameError = false;\n      }\n    }\n    if (formData.image) {\n      if (formData.image.size > 3e6) {\n        error.imageError = \"image exceeds 3MB\";\n      } else {\n        error.imageError = false;\n      }\n    }\n\n    setFormState({\n      error: error.nameError || error.imageError ? true : false,\n      message: error.nameError || error.imageError,\n    });\n    // eslint-disable-next-line\n  }, [formData]);\n\n  function logOutUser() {\n    userAccount\n      .logOut()\n      .then((res) => {\n        localStorage.clear();\n        socketClear();\n        setIsLoggedIn(false);\n        setDataMounted(false);\n        setChatMounted(false);\n        navigate(\"/login\");\n      })\n      .catch((err) => {\n        pushFlashMessage(err.response.data.messages);\n      });\n  }\n\n  function deleteUser(e) {\n    e.preventDefault();\n\n    if (passwordInput) {\n      const userData = new FormData();\n      userData.append(\"password\", passwordInput);\n\n      userAccount\n        .delete(localStorage.userId, userData)\n        .then((res) => {\n          localStorage.clear();\n          socketClear();\n          setIsLoggedIn(false);\n          setIsLoggedIn(false);\n          setDataMounted(false);\n          setChatMounted(false);\n          navigate(\"/login\");\n        })\n        .catch((err) =>\n          setPasswordFeedback(err.response.data.messages[0].message)\n        );\n    } else {\n      setPasswordFeedback(\"ENTER YOUR PASSWORD\");\n    }\n  }\n\n  function modifyUser(e) {\n    e.preventDefault();\n\n    if (formState.error) return null;\n\n    setFormState({\n      error: false,\n      pending: true,\n      message: null,\n    });\n\n    let userData = new FormData();\n    if (formData.name) userData.append(\"name\", formData.name);\n    if (formData.color) userData.append(\"color\", formData.color);\n    if (formData.image) userData.append(\"file\", formData.image);\n\n    userAccount\n      .edit(localStorage.userId, userData)\n      .then((res) => {\n        localStorage.setItem(\"username\", res.data.userData.username);\n        localStorage.setItem(\"userImage\", res.data.userData.userImage);\n        localStorage.setItem(\n          \"userImageSmall\",\n          res.data.userData.userImageSmall\n        );\n        localStorage.setItem(\n          \"userImageMedium\",\n          res.data.userData.userImageMedium\n        );\n        localStorage.setItem(\"userColor\", res.data.userData.userColor);\n        pushFlashMessage(res.data.messages);\n\n        navigate(\"/\");\n      })\n      .catch((err) => {\n        setFormState({\n          error: false,\n          pending: false,\n          message: null,\n        });\n        pushFlashMessage(err.response.data.messages);\n      });\n  }\n\n  function updateFormData(params) {\n    const { e, data, type } = params;\n\n    function setNewValue(key, value) {\n      setFormData({ ...formData, [key]: value });\n    }\n\n    if (type === \"name\") setNewValue(type, e.target.value.trim());\n    else if (type === \"image\") setNewValue(type, e);\n    else if (type === \"color\") {\n      setNewValue(type, data.hex);\n      colorPreviewRef.current.style.backgroundColor = data.hex;\n    }\n  }\n\n  function toggleDeleteModal(e) {\n    if (!deleteModalIsOpen) setDeleteModalIsOpen(true);\n    if (e.type === \"keydown\" && e.key === \"Escape\") {\n      setDeleteModalIsOpen(false);\n      setPasswordFeedback(null);\n    } else if (\n      e.type === \"click\" &&\n      (e.target.id === \"modalBackground\" ||\n        e.target.id === \"modalCloseButton\" ||\n        e.target.parentElement.id === \"modalCloseButton\")\n    ) {\n      setDeleteModalIsOpen(false);\n      setPasswordFeedback(null);\n    }\n  }\n\n  function passwordOnChange(input) {\n    setPasswordInput(input);\n  }\n\n  if (!dataReady) {\n    return (\n      <div className=\"bg-gray-700 w-full h-full py-2 flex sm:items-center justify-center\">\n        <div className=\"flex flex-col items-center\">\n          <ImageSelectorPreview loading />\n          <div className=\"w-[16.5rem] sm:w-[16.9rem] h-10 mt-4 bg-gray-600 group hover:bg-gray-500 rounded-md animate-pulse relative\"></div>\n          <div className=\"w-full h-24 m-2 bg-gray-600 rounded-md animate-pulse\"></div>\n        </div>\n        <div className=\"flex flex-col items-center justify-between absolute bottom-0\">\n          <CircleButton\n            status=\"logout\"\n            className=\"text-mexican-red-400 hover:text-mexican-red-500\"\n            color=\"gray-600\"\n          />\n          <div className=\"mt-2 text-gray-900 hover:cursor-pointer\">\n            delete account\n          </div>\n        </div>\n      </div>\n    );\n  } else\n    return (\n      <>\n        {deleteModalIsOpen ? (\n          <DeleteUserModal\n            toggle={toggleDeleteModal}\n            onSubmit={deleteUser}\n            sendBack={passwordOnChange}\n            feedback={passwordFeedback}\n          />\n        ) : null}\n\n        <div className=\"bg-gray-700 w-full py-2 flex sm:items-center justify-center\">\n          <form className=\"flex flex-col items-center\" onSubmit={modifyUser}>\n            <ImageSelectorPreview\n              imageSrc={localStorage.userImage}\n              passData={(e) => updateFormData({ e, type: \"image\" })}\n            />\n            <label htmlFor=\"username\" className=\"sr-only\">\n              username\n            </label>\n            <InputBox\n              className=\"w-[16.5rem] sm:w-[16.9rem] mt-4 bg-gray-600 group hover:bg-gray-500 relative\"\n              transferFocus={(e) => e.target.children.username?.focus()}\n            >\n              <input\n                type=\"text\"\n                name=\"username\"\n                id=\"username\"\n                className=\"block w-full bg-gray-600 focus:outline-none text-center font-semibold text-gray-300 group-hover:bg-gray-500 transition-colors duration-75 ease-in\"\n                onChange={(e) => updateFormData({ e, type: \"name\" })}\n                ref={nameInputRef}\n                autoComplete=\"off\"\n              />\n              <span\n                className={\n                  \"w-7 h-7 rounded-full border-2 border-gray-400 absolute right-0 top-0 m-1 hover:cursor-pointer\"\n                }\n                style={{ backgroundColor: `${localStorage.userColor}` }}\n                ref={colorPreviewRef}\n              ></span>\n            </InputBox>\n            <TwitterPicker\n              color={localStorage.userColor}\n              colors={[\n                \"#e74645\",\n                \"#fb7756\",\n                \"#facd60\",\n                \"#fdfa66\",\n                \"#1ac0c6\",\n                \"#072448\",\n                \"#309975\",\n                \"#bbd4ce\",\n                \"#f9b4ab\",\n                \"#d527b7\",\n              ]}\n              className=\"mt-1 mb-3 shadow-md picker-overwrite\"\n              triangle=\"top-right\"\n              onChange={(color, e) =>\n                updateFormData({ e, data: color, type: \"color\" })\n              }\n            />\n            <TextButton\n              text={formState.pending ? \"processing...\" : \"keep changes\"}\n              disabled={formState.error || formState.pending}\n            />\n            <div className=\" h-4 mt-4 -mb-16 text-mexican-red-500 font-bold\">\n              {!formState.error || formState.message}\n            </div>\n          </form>\n\n          <div className=\"flex flex-col items-center justify-between absolute bottom-0\">\n            <CircleButton\n              status=\"logout\"\n              className=\"text-mexican-red-400 hover:text-mexican-red-500\"\n              color=\"gray-600\"\n              onClick={logOutUser}\n            />\n            <div\n              className=\"mt-2 text-gray-900 hover:cursor-pointer\"\n              onClick={toggleDeleteModal}\n            >\n              delete account\n            </div>\n          </div>\n        </div>\n      </>\n    );\n}\n\nexport default UserPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}