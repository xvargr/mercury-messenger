{"ast":null,"code":"import _slicedToArray from\"/home/agreus/Documents/webdev/mercury-messenger/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext,useEffect}from\"react\";import{Link,useNavigate}from\"react-router-dom\";// context\nimport{DataContext}from\"../context/DataContext\";import{FlashContext}from\"../context/FlashContext\";// components\nimport{ChevronDownIcon,ChevronUpIcon}from\"@heroicons/react/solid\";import InviteButton from\"../ui/InviteButton\";// utility hooks\nimport axiosInstance from\"../../utils/axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function GroupBanner(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isExpanded=_useState2[0],setIsExpanded=_useState2[1];var _useContext=useContext(FlashContext),pushFlashMessage=_useContext.pushFlashMessage;var _useContext2=useContext(DataContext),dataReady=_useContext2.dataReady,dataHelpers=_useContext2.dataHelpers,selectedGroup=_useContext2.selectedGroup,setSelectedChannel=_useContext2.setSelectedChannel,clearSelected=_useContext2.clearSelected,isAdmin=_useContext2.isAdmin;var navigate=useNavigate();var _axiosInstance=axiosInstance(),userGroups=_axiosInstance.userGroups;var inviteLink;if(dataReady&&selectedGroup){inviteLink=selectedGroup.inviteLink;}// close dropdown on group change\nuseEffect(function(){return function(){setIsExpanded(false);};},[selectedGroup]);function expandHandler(e){isExpanded?setIsExpanded(false):setIsExpanded(true);if(e.target.id===\"settingsButton\")setSelectedChannel(null);}function leaveGroup(){userGroups.leave(selectedGroup._id).then(function(res){clearSelected();dataHelpers.removeGroup(selectedGroup._id);pushFlashMessage(res.data.messages);navigate(\"/\");}).catch(function(err){pushFlashMessage(err.response.data.messages);});}function deleteGroup(){userGroups.delete(selectedGroup._id).then(function(res){clearSelected();dataHelpers.removeGroup(selectedGroup._id);pushFlashMessage(res.data.messages);navigate(\"/\");}).catch(function(err){pushFlashMessage(err.response.data.messages);});}function AdminOptions(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{id:\"settingsButton\",className:\"w-5/6 mx-4 my-1 px-4 py-1 text-center rounded-lg shadow-md bg-gray-700 hover:bg-gray-600 transition-colors ease-in duration-75\",to:\"/g/\".concat(selectedGroup.name,\"/settings\"),onClick:expandHandler,children:\"SETTINGS\"}),/*#__PURE__*/_jsx(\"button\",{className:\"w-5/6 mx-4 my-1 px-4 py-1 text-center rounded-lg shadow-md bg-gray-700 hover:bg-gray-600 transition-colors ease-in duration-75\",onClick:deleteGroup,children:\"DELETE GROUP\"})]});}function TrayExpanded(){return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full px-2 py-4 bg-gray-900 text-gray-400 rounded-b-md shadow-md absolute top-10 flex flex-col justify-center items-center z-10\",children:[/*#__PURE__*/_jsx(InviteButton,{inviteLink:inviteLink}),isAdmin()?/*#__PURE__*/_jsx(AdminOptions,{}):null,/*#__PURE__*/_jsx(\"button\",{className:\"w-5/6 mx-4 my-1 px-4 py-1 text-center rounded-lg shadow-md bg-gray-700 hover:bg-gray-600 transition-colors ease-in duration-75\",onClick:leaveGroup,children:\"LEAVE\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-3 bg-gray-900 rounded-b-lg shadow-md flex items-center justify-center absolute -bottom-3 hover:h-4 hover:translate-y-1 transition-all cursor-pointer group\",onClick:expandHandler,children:/*#__PURE__*/_jsx(ChevronUpIcon,{className:\"h-4 w-3 text-gray-700 group-hover:text-gray-500 transition-colors\"})})]});}function TrayCollapsed(){return/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-4 md:w-12 md:h-3 bg-gray-800 rounded-b-lg fixed top-10 flex justify-center items-center shadow-md hover:h-6 transition-all cursor-pointer group\",onClick:expandHandler,children:/*#__PURE__*/_jsx(ChevronDownIcon,{className:\"h-6 w-6 md:w-3 md:-h-3 text-gray-700 group-hover:text-gray-500 transition-colors\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full h-10 bg-gray-800 flex justify-center shadow-md items-center relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"m-2 text-gray-400 truncate font-montserrat\",children:props.name}),isExpanded?/*#__PURE__*/_jsx(TrayExpanded,{}):/*#__PURE__*/_jsx(TrayCollapsed,{})]});}export default GroupBanner;","map":{"version":3,"names":["useState","useContext","useEffect","Link","useNavigate","DataContext","FlashContext","ChevronDownIcon","ChevronUpIcon","InviteButton","axiosInstance","GroupBanner","props","isExpanded","setIsExpanded","pushFlashMessage","dataReady","dataHelpers","selectedGroup","setSelectedChannel","clearSelected","isAdmin","navigate","userGroups","inviteLink","expandHandler","e","target","id","leaveGroup","leave","_id","then","res","removeGroup","data","messages","catch","err","response","deleteGroup","delete","AdminOptions","name","TrayExpanded","TrayCollapsed"],"sources":["/home/agreus/Documents/webdev/mercury-messenger/client/src/components/channels/GroupBanner.js"],"sourcesContent":["import { useState, useContext, useEffect } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\n\n// context\nimport { DataContext } from \"../context/DataContext\";\nimport { FlashContext } from \"../context/FlashContext\";\n\n// components\nimport { ChevronDownIcon, ChevronUpIcon } from \"@heroicons/react/solid\";\nimport InviteButton from \"../ui/InviteButton\";\n\n// utility hooks\nimport axiosInstance from \"../../utils/axios\";\n\nfunction GroupBanner(props) {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const { pushFlashMessage } = useContext(FlashContext);\n  const {\n    dataReady,\n    dataHelpers,\n    selectedGroup,\n    setSelectedChannel,\n    clearSelected,\n    isAdmin,\n  } = useContext(DataContext);\n  const navigate = useNavigate();\n  const { userGroups } = axiosInstance();\n\n  let inviteLink;\n\n  if (dataReady && selectedGroup) {\n    inviteLink = selectedGroup.inviteLink;\n  }\n\n  // close dropdown on group change\n  useEffect(() => {\n    return () => {\n      setIsExpanded(false);\n    };\n  }, [selectedGroup]);\n\n  function expandHandler(e) {\n    isExpanded ? setIsExpanded(false) : setIsExpanded(true);\n    if (e.target.id === \"settingsButton\") setSelectedChannel(null);\n  }\n\n  function leaveGroup() {\n    userGroups\n      .leave(selectedGroup._id)\n      .then((res) => {\n        clearSelected();\n        dataHelpers.removeGroup(selectedGroup._id);\n        pushFlashMessage(res.data.messages);\n        navigate(\"/\");\n      })\n      .catch((err) => {\n        pushFlashMessage(err.response.data.messages);\n      });\n  }\n\n  function deleteGroup() {\n    userGroups\n      .delete(selectedGroup._id)\n      .then((res) => {\n        clearSelected();\n        dataHelpers.removeGroup(selectedGroup._id);\n        pushFlashMessage(res.data.messages);\n        navigate(\"/\");\n      })\n      .catch((err) => {\n        pushFlashMessage(err.response.data.messages);\n      });\n  }\n\n  function AdminOptions() {\n    return (\n      <>\n        <Link\n          id=\"settingsButton\"\n          className=\"w-5/6 mx-4 my-1 px-4 py-1 text-center rounded-lg shadow-md bg-gray-700 hover:bg-gray-600 transition-colors ease-in duration-75\"\n          to={`/g/${selectedGroup.name}/settings`}\n          onClick={expandHandler}\n        >\n          SETTINGS\n        </Link>\n        <button\n          className=\"w-5/6 mx-4 my-1 px-4 py-1 text-center rounded-lg shadow-md bg-gray-700 hover:bg-gray-600 transition-colors ease-in duration-75\"\n          onClick={deleteGroup}\n        >\n          DELETE GROUP\n        </button>\n      </>\n    );\n  }\n\n  function TrayExpanded() {\n    return (\n      <div className=\"w-full px-2 py-4 bg-gray-900 text-gray-400 rounded-b-md shadow-md absolute top-10 flex flex-col justify-center items-center z-10\">\n        <InviteButton inviteLink={inviteLink} />\n        {isAdmin() ? <AdminOptions /> : null}\n        <button\n          className=\"w-5/6 mx-4 my-1 px-4 py-1 text-center rounded-lg shadow-md bg-gray-700 hover:bg-gray-600 transition-colors ease-in duration-75\"\n          onClick={leaveGroup}\n        >\n          LEAVE\n        </button>\n        <div\n          className=\"w-12 h-3 bg-gray-900 rounded-b-lg shadow-md flex items-center justify-center absolute -bottom-3 hover:h-4 hover:translate-y-1 transition-all cursor-pointer group\"\n          onClick={expandHandler}\n        >\n          <ChevronUpIcon className=\"h-4 w-3 text-gray-700 group-hover:text-gray-500 transition-colors\" />\n        </div>\n      </div>\n    );\n  }\n\n  function TrayCollapsed() {\n    return (\n      <div\n        className=\"w-20 h-4 md:w-12 md:h-3 bg-gray-800 rounded-b-lg fixed top-10 flex justify-center items-center shadow-md hover:h-6 transition-all cursor-pointer group\"\n        onClick={expandHandler}\n      >\n        <ChevronDownIcon className=\"h-6 w-6 md:w-3 md:-h-3 text-gray-700 group-hover:text-gray-500 transition-colors\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"w-full h-10 bg-gray-800 flex justify-center shadow-md items-center relative\">\n      <div className=\"m-2 text-gray-400 truncate font-montserrat\">\n        {props.name}\n      </div>\n      {isExpanded ? <TrayExpanded /> : <TrayCollapsed />}\n    </div>\n  );\n}\n\nexport default GroupBanner;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}