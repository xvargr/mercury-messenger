{"ast":null,"code":"import{useContext}from\"react\";import{DataContext}from\"../components/context/DataContext\";import{FlashContext}from\"../components/context/FlashContext\";import Sender from\"../components/chat/SenderWrapper\";import Message from\"../components/chat/Message\";import GroupBadge from\"../components/groups/GroupBadge\";import ChannelBadge from\"../components/channels/ChannelBadge\";import MemberStatusBadge from\"../components/channels/MemberStatusBadge\";import{FlashMessageWrapper,FlashMessage}from\"../components/ui/FlashMessage\";// utility hooks\nimport useSocket from\"./socket\";import SelectableMemberBadge from\"../components/ui/SelectableMemberBadge\";import{jsx as _jsx}from\"react/jsx-runtime\";export function FlashStack(){var _useContext=useContext(FlashContext),messageStack=_useContext.messageStack,unmountFlash=_useContext.unmountFlash;var stack=[];messageStack===null||messageStack===void 0?void 0:messageStack.forEach(function(message){var position=messageStack.indexOf(message);stack.push(/*#__PURE__*/_jsx(FlashMessage,{type:message.type,message:message.message,position:position,unmount:unmountFlash},position));});return/*#__PURE__*/_jsx(FlashMessageWrapper,{children:stack});}export function GroupStack(){var _useContext2=useContext(DataContext),groupData=_useContext2.groupData,selectedGroup=_useContext2.selectedGroup,setSelectedGroup=_useContext2.setSelectedGroup,setSelectedChannel=_useContext2.setSelectedChannel,dataHelpers=_useContext2.dataHelpers;function groupChangeHandler(groupId){setSelectedGroup(groupData[groupId]);setSelectedChannel(null);}var groupStack=[];var _loop=function _loop(groupId){var thisGroup=groupData[groupId];var selected=groupId===(selectedGroup===null||selectedGroup===void 0?void 0:selectedGroup._id);groupStack.push(/*#__PURE__*/_jsx(GroupBadge,{name:thisGroup.name,img:thisGroup.image.thumbnail,selected:selected,unread:dataHelpers.getUnread({groupId:groupId}),onClick:function onClick(){return groupChangeHandler(thisGroup._id);}},thisGroup._id));};for(var groupId in groupData){_loop(groupId);}return groupStack;}export function ChannelStack(){var _useContext3=useContext(DataContext),groupData=_useContext3.groupData,selectedGroup=_useContext3.selectedGroup,selectedChannel=_useContext3.selectedChannel,dataHelpers=_useContext3.dataHelpers;var thisGroup=groupData[selectedGroup._id];var isAdmin=thisGroup.administrators.some(function(admin){return admin._id===localStorage.userId;});var channelStack=[];thisGroup.channels.text.forEach(function(channel){var selected=(selectedChannel===null||selectedChannel===void 0?void 0:selectedChannel._id)===channel._id?true:false;channelStack.push(/*#__PURE__*/_jsx(ChannelBadge,{data:channel,selected:selected,type:\"text\",unread:dataHelpers.getUnread({channelId:channel._id}),isAdmin:isAdmin},channel._id));});return channelStack;}export function MemberStatusStack(){var _useContext4=useContext(DataContext),groupData=_useContext4.groupData,selectedGroup=_useContext4.selectedGroup;var _useContext5=useContext(DataContext),peerHelpers=_useContext5.peerHelpers;var thisGroup=groupData[selectedGroup._id];var memberStack=[];thisGroup.members.forEach(function(member){memberStack.push(/*#__PURE__*/_jsx(MemberStatusBadge,{member:member,status:peerHelpers.getStatus(member._id),isAdmin:true},member._id));});return memberStack;}export function MentionsSelector(props){var selectedMembers=props.selectedMembers,onSelect=props.onSelect,onDeselect=props.onDeselect;var _useContext6=useContext(DataContext),groupData=_useContext6.groupData,selectedGroup=_useContext6.selectedGroup;var thisGroup=groupData[selectedGroup._id];var memberStack=[];function toggleSelection(userId){if(!selectedMembers.includes(userId))onSelect(userId);else onDeselect(userId);}thisGroup.members.forEach(function(member){if(member._id===localStorage.userId)return null;// don't render this user\nvar selected=selectedMembers.includes(member._id);memberStack.push(/*#__PURE__*/_jsx(SelectableMemberBadge,{member:member,selected:selected,onClick:toggleSelection},member._id));});return/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-full overflow-x-hidden overflow-y-auto scrollbar-dark\",children:memberStack});}// renders every cluster in the current chat\nexport function ChatStack(){var _useContext7=useContext(DataContext),groupData=_useContext7.groupData,selectedGroup=_useContext7.selectedGroup,selectedChannel=_useContext7.selectedChannel,dataHelpers=_useContext7.dataHelpers;var _useSocket=useSocket(),sendMessage=_useSocket.sendMessage,appendMessage=_useSocket.appendMessage;var thisGroup=groupData[selectedGroup._id];var chatData=thisGroup.chatData[selectedChannel._id];var clusterStack=[];var isUserAdmin={};thisGroup.members.forEach(function(member){var isAdmin=thisGroup.administrators.some(function(admin){return admin._id===member._id;});isUserAdmin[member._id]=isAdmin?true:false;});// renders the sender/cluster wrapper\nfunction renderMessages(cluster){var content=cluster.content;var messageStack=[];var someFailed=content.some(function(message){return message===null||message===void 0?void 0:message.failed;});var allConfirmed=content.every(function(message){return(message===null||message===void 0?void 0:message.failed)||message._id;});// prevent retry actions if some messages are still pending\nvar isGenesis=true;var retryObject=null;// creates object with all necessary information for a retry if any failed\nif(someFailed&&allConfirmed){retryObject={clusterData:cluster,actions:{sendMessage:sendMessage,appendMessage:appendMessage,removeClusterLocally:dataHelpers.removeClusterLocally},chatLocation:{group:selectedGroup._id,channel:selectedChannel._id},failedIndex:content.reduce(function(result,message,index){if(message.failed)result.push(index);return result;},[])};}// renders the individual messages in the cluster\ncontent.forEach(function(message){// some messages can be null if saved out of order, so check\nif(message){messageStack.push(/*#__PURE__*/_jsx(Message,{text:message.text,image:message.file,pending:message._id?false:true,failed:message.failed// indicates fails on messages\n,retryObject:isGenesis?retryObject:null// enables retry actions on genesis message if any child failed\n},message.timestamp));}if(isGenesis)isGenesis=false;});return messageStack;}chatData.forEach(function(cluster){clusterStack.push(/*#__PURE__*/_jsx(Sender,{clusterId:cluster._id,sender:cluster.sender,timestamp:cluster.clusterTimestamp,pending:cluster._id?false:true,mentions:cluster.mentions,reply:cluster.reply,children:renderMessages(cluster)},cluster.clusterTimestamp));});return clusterStack;}","map":{"version":3,"names":["useContext","DataContext","FlashContext","Sender","Message","GroupBadge","ChannelBadge","MemberStatusBadge","FlashMessageWrapper","FlashMessage","useSocket","SelectableMemberBadge","FlashStack","messageStack","unmountFlash","stack","forEach","message","position","indexOf","push","type","GroupStack","groupData","selectedGroup","setSelectedGroup","setSelectedChannel","dataHelpers","groupChangeHandler","groupId","groupStack","thisGroup","selected","_id","name","image","thumbnail","getUnread","ChannelStack","selectedChannel","isAdmin","administrators","some","admin","localStorage","userId","channelStack","channels","text","channel","channelId","MemberStatusStack","peerHelpers","memberStack","members","member","getStatus","MentionsSelector","props","selectedMembers","onSelect","onDeselect","toggleSelection","includes","ChatStack","sendMessage","appendMessage","chatData","clusterStack","isUserAdmin","renderMessages","cluster","content","someFailed","failed","allConfirmed","every","isGenesis","retryObject","clusterData","actions","removeClusterLocally","chatLocation","group","failedIndex","reduce","result","index","file","timestamp","sender","clusterTimestamp","mentions","reply"],"sources":["/home/agreus/Documents/webdev/mercury-messenger/client/src/utils/iterableComponents.js"],"sourcesContent":["import { useContext } from \"react\";\n\nimport { DataContext } from \"../components/context/DataContext\";\nimport { FlashContext } from \"../components/context/FlashContext\";\n\nimport Sender from \"../components/chat/SenderWrapper\";\nimport Message from \"../components/chat/Message\";\nimport GroupBadge from \"../components/groups/GroupBadge\";\nimport ChannelBadge from \"../components/channels/ChannelBadge\";\nimport MemberStatusBadge from \"../components/channels/MemberStatusBadge\";\nimport {\n  FlashMessageWrapper,\n  FlashMessage,\n} from \"../components/ui/FlashMessage\";\n\n// utility hooks\nimport useSocket from \"./socket\";\nimport SelectableMemberBadge from \"../components/ui/SelectableMemberBadge\";\n\nexport function FlashStack() {\n  const { messageStack, unmountFlash } = useContext(FlashContext);\n  const stack = [];\n\n  messageStack?.forEach((message) => {\n    const position = messageStack.indexOf(message);\n\n    stack.push(\n      <FlashMessage\n        type={message.type}\n        message={message.message}\n        key={position}\n        position={position}\n        unmount={unmountFlash}\n      />\n    );\n  });\n\n  return <FlashMessageWrapper>{stack}</FlashMessageWrapper>;\n}\n\nexport function GroupStack() {\n  const {\n    groupData,\n    selectedGroup,\n    setSelectedGroup,\n    setSelectedChannel,\n    dataHelpers,\n  } = useContext(DataContext);\n\n  function groupChangeHandler(groupId) {\n    setSelectedGroup(groupData[groupId]);\n    setSelectedChannel(null);\n  }\n\n  const groupStack = [];\n\n  for (const groupId in groupData) {\n    const thisGroup = groupData[groupId];\n    const selected = groupId === selectedGroup?._id;\n\n    groupStack.push(\n      <GroupBadge\n        name={thisGroup.name}\n        img={thisGroup.image.thumbnail}\n        selected={selected}\n        unread={dataHelpers.getUnread({ groupId })}\n        key={thisGroup._id}\n        onClick={() => groupChangeHandler(thisGroup._id)}\n      />\n    );\n  }\n  return groupStack;\n}\n\nexport function ChannelStack() {\n  const { groupData, selectedGroup, selectedChannel, dataHelpers } =\n    useContext(DataContext);\n\n  const thisGroup = groupData[selectedGroup._id];\n\n  const isAdmin = thisGroup.administrators.some(\n    (admin) => admin._id === localStorage.userId\n  );\n\n  const channelStack = [];\n\n  thisGroup.channels.text.forEach((channel) => {\n    const selected = selectedChannel?._id === channel._id ? true : false;\n\n    channelStack.push(\n      <ChannelBadge\n        data={channel}\n        selected={selected}\n        type=\"text\"\n        unread={dataHelpers.getUnread({ channelId: channel._id })}\n        key={channel._id}\n        isAdmin={isAdmin}\n      />\n    );\n  });\n\n  return channelStack;\n}\n\nexport function MemberStatusStack() {\n  const { groupData, selectedGroup } = useContext(DataContext);\n  const { peerHelpers } = useContext(DataContext);\n\n  const thisGroup = groupData[selectedGroup._id];\n  const memberStack = [];\n\n  thisGroup.members.forEach((member) => {\n    memberStack.push(\n      <MemberStatusBadge\n        member={member}\n        status={peerHelpers.getStatus(member._id)}\n        key={member._id}\n        isAdmin={true}\n      />\n    );\n  });\n  return memberStack;\n}\n\nexport function MentionsSelector(props) {\n  const { selectedMembers, onSelect, onDeselect } = props;\n  const { groupData, selectedGroup } = useContext(DataContext);\n\n  const thisGroup = groupData[selectedGroup._id];\n  const memberStack = [];\n\n  function toggleSelection(userId) {\n    if (!selectedMembers.includes(userId)) onSelect(userId);\n    else onDeselect(userId);\n  }\n\n  thisGroup.members.forEach((member) => {\n    if (member._id === localStorage.userId) return null; // don't render this user\n\n    const selected = selectedMembers.includes(member._id);\n\n    memberStack.push(\n      <SelectableMemberBadge\n        member={member}\n        key={member._id}\n        selected={selected}\n        onClick={toggleSelection}\n      />\n    );\n  });\n\n  return (\n    <div className=\"w-full h-full overflow-x-hidden overflow-y-auto scrollbar-dark\">\n      {memberStack}\n    </div>\n  );\n}\n\n// renders every cluster in the current chat\nexport function ChatStack() {\n  const { groupData, selectedGroup, selectedChannel, dataHelpers } =\n    useContext(DataContext);\n  const { sendMessage, appendMessage } = useSocket();\n\n  const thisGroup = groupData[selectedGroup._id];\n  const chatData = thisGroup.chatData[selectedChannel._id];\n\n  const clusterStack = [];\n  const isUserAdmin = {};\n\n  thisGroup.members.forEach((member) => {\n    const isAdmin = thisGroup.administrators.some(\n      (admin) => admin._id === member._id\n    );\n    isUserAdmin[member._id] = isAdmin ? true : false;\n  });\n\n  // renders the sender/cluster wrapper\n  function renderMessages(cluster) {\n    const content = cluster.content;\n    const messageStack = [];\n    const someFailed = content.some((message) => message?.failed);\n    const allConfirmed = content.every(\n      (message) => message?.failed || message._id\n    ); // prevent retry actions if some messages are still pending\n    let isGenesis = true;\n    let retryObject = null;\n\n    // creates object with all necessary information for a retry if any failed\n    if (someFailed && allConfirmed) {\n      retryObject = {\n        clusterData: cluster,\n        actions: {\n          sendMessage,\n          appendMessage,\n          removeClusterLocally: dataHelpers.removeClusterLocally,\n        },\n        chatLocation: {\n          group: selectedGroup._id,\n          channel: selectedChannel._id,\n        },\n        failedIndex: content.reduce((result, message, index) => {\n          if (message.failed) result.push(index);\n          return result;\n        }, []),\n      };\n    }\n\n    // renders the individual messages in the cluster\n    content.forEach((message) => {\n      // some messages can be null if saved out of order, so check\n      if (message) {\n        messageStack.push(\n          <Message\n            key={message.timestamp}\n            text={message.text}\n            image={message.file}\n            pending={message._id ? false : true}\n            failed={message.failed} // indicates fails on messages\n            retryObject={isGenesis ? retryObject : null} // enables retry actions on genesis message if any child failed\n          />\n        );\n      }\n      if (isGenesis) isGenesis = false;\n    });\n\n    return messageStack;\n  }\n\n  chatData.forEach((cluster) => {\n    clusterStack.push(\n      <Sender\n        clusterId={cluster._id}\n        sender={cluster.sender}\n        timestamp={cluster.clusterTimestamp}\n        key={cluster.clusterTimestamp}\n        pending={cluster._id ? false : true}\n        mentions={cluster.mentions}\n        reply={cluster.reply}\n      >\n        {renderMessages(cluster)}\n      </Sender>\n    );\n  });\n  return clusterStack;\n}\n"],"mappings":"AAAA,OAASA,UAAU,KAAQ,OAAO,CAElC,OAASC,WAAW,KAAQ,mCAAmC,CAC/D,OAASC,YAAY,KAAQ,oCAAoC,CAEjE,MAAOC,OAAM,KAAM,kCAAkC,CACrD,MAAOC,QAAO,KAAM,4BAA4B,CAChD,MAAOC,WAAU,KAAM,iCAAiC,CACxD,MAAOC,aAAY,KAAM,qCAAqC,CAC9D,MAAOC,kBAAiB,KAAM,0CAA0C,CACxE,OACEC,mBAAmB,CACnBC,YAAY,KACP,+BAA+B,CAEtC;AACA,MAAOC,UAAS,KAAM,UAAU,CAChC,MAAOC,sBAAqB,KAAM,wCAAwC,CAAC,2CAE3E,MAAO,SAASC,WAAU,EAAG,CAC3B,gBAAuCZ,UAAU,CAACE,YAAY,CAAC,CAAvDW,YAAY,aAAZA,YAAY,CAAEC,YAAY,aAAZA,YAAY,CAClC,GAAMC,MAAK,CAAG,EAAE,CAEhBF,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAEG,OAAO,CAAC,SAACC,OAAO,CAAK,CACjC,GAAMC,SAAQ,CAAGL,YAAY,CAACM,OAAO,CAACF,OAAO,CAAC,CAE9CF,KAAK,CAACK,IAAI,cACR,KAAC,YAAY,EACX,IAAI,CAAEH,OAAO,CAACI,IAAK,CACnB,OAAO,CAAEJ,OAAO,CAACA,OAAQ,CAEzB,QAAQ,CAAEC,QAAS,CACnB,OAAO,CAAEJ,YAAa,EAFjBI,QAAQ,CAGb,CACH,CACH,CAAC,CAAC,CAEF,mBAAO,KAAC,mBAAmB,WAAEH,KAAK,EAAuB,CAC3D,CAEA,MAAO,SAASO,WAAU,EAAG,CAC3B,iBAMItB,UAAU,CAACC,WAAW,CAAC,CALzBsB,SAAS,cAATA,SAAS,CACTC,aAAa,cAAbA,aAAa,CACbC,gBAAgB,cAAhBA,gBAAgB,CAChBC,kBAAkB,cAAlBA,kBAAkB,CAClBC,WAAW,cAAXA,WAAW,CAGb,QAASC,mBAAkB,CAACC,OAAO,CAAE,CACnCJ,gBAAgB,CAACF,SAAS,CAACM,OAAO,CAAC,CAAC,CACpCH,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAEA,GAAMI,WAAU,CAAG,EAAE,CAAC,yBAEXD,OAAO,EAChB,GAAME,UAAS,CAAGR,SAAS,CAACM,OAAO,CAAC,CACpC,GAAMG,SAAQ,CAAGH,OAAO,IAAKL,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAES,GAAG,EAE/CH,UAAU,CAACV,IAAI,cACb,KAAC,UAAU,EACT,IAAI,CAAEW,SAAS,CAACG,IAAK,CACrB,GAAG,CAAEH,SAAS,CAACI,KAAK,CAACC,SAAU,CAC/B,QAAQ,CAAEJ,QAAS,CACnB,MAAM,CAAEL,WAAW,CAACU,SAAS,CAAC,CAAER,OAAO,CAAPA,OAAQ,CAAC,CAAE,CAE3C,OAAO,CAAE,yBAAMD,mBAAkB,CAACG,SAAS,CAACE,GAAG,CAAC,EAAC,EAD5CF,SAAS,CAACE,GAAG,CAElB,CACH,CAAC,EAbJ,IAAK,GAAMJ,QAAO,GAAIN,UAAS,CAAE,OAAtBM,OAAO,EAclB,CACA,MAAOC,WAAU,CACnB,CAEA,MAAO,SAASQ,aAAY,EAAG,CAC7B,iBACEtC,UAAU,CAACC,WAAW,CAAC,CADjBsB,SAAS,cAATA,SAAS,CAAEC,aAAa,cAAbA,aAAa,CAAEe,eAAe,cAAfA,eAAe,CAAEZ,WAAW,cAAXA,WAAW,CAG9D,GAAMI,UAAS,CAAGR,SAAS,CAACC,aAAa,CAACS,GAAG,CAAC,CAE9C,GAAMO,QAAO,CAAGT,SAAS,CAACU,cAAc,CAACC,IAAI,CAC3C,SAACC,KAAK,QAAKA,MAAK,CAACV,GAAG,GAAKW,YAAY,CAACC,MAAM,GAC7C,CAED,GAAMC,aAAY,CAAG,EAAE,CAEvBf,SAAS,CAACgB,QAAQ,CAACC,IAAI,CAAChC,OAAO,CAAC,SAACiC,OAAO,CAAK,CAC3C,GAAMjB,SAAQ,CAAG,CAAAO,eAAe,SAAfA,eAAe,iBAAfA,eAAe,CAAEN,GAAG,IAAKgB,OAAO,CAAChB,GAAG,CAAG,IAAI,CAAG,KAAK,CAEpEa,YAAY,CAAC1B,IAAI,cACf,KAAC,YAAY,EACX,IAAI,CAAE6B,OAAQ,CACd,QAAQ,CAAEjB,QAAS,CACnB,IAAI,CAAC,MAAM,CACX,MAAM,CAAEL,WAAW,CAACU,SAAS,CAAC,CAAEa,SAAS,CAAED,OAAO,CAAChB,GAAI,CAAC,CAAE,CAE1D,OAAO,CAAEO,OAAQ,EADZS,OAAO,CAAChB,GAAG,CAEhB,CACH,CACH,CAAC,CAAC,CAEF,MAAOa,aAAY,CACrB,CAEA,MAAO,SAASK,kBAAiB,EAAG,CAClC,iBAAqCnD,UAAU,CAACC,WAAW,CAAC,CAApDsB,SAAS,cAATA,SAAS,CAAEC,aAAa,cAAbA,aAAa,CAChC,iBAAwBxB,UAAU,CAACC,WAAW,CAAC,CAAvCmD,WAAW,cAAXA,WAAW,CAEnB,GAAMrB,UAAS,CAAGR,SAAS,CAACC,aAAa,CAACS,GAAG,CAAC,CAC9C,GAAMoB,YAAW,CAAG,EAAE,CAEtBtB,SAAS,CAACuB,OAAO,CAACtC,OAAO,CAAC,SAACuC,MAAM,CAAK,CACpCF,WAAW,CAACjC,IAAI,cACd,KAAC,iBAAiB,EAChB,MAAM,CAAEmC,MAAO,CACf,MAAM,CAAEH,WAAW,CAACI,SAAS,CAACD,MAAM,CAACtB,GAAG,CAAE,CAE1C,OAAO,CAAE,IAAK,EADTsB,MAAM,CAACtB,GAAG,CAEf,CACH,CACH,CAAC,CAAC,CACF,MAAOoB,YAAW,CACpB,CAEA,MAAO,SAASI,iBAAgB,CAACC,KAAK,CAAE,CACtC,GAAQC,gBAAe,CAA2BD,KAAK,CAA/CC,eAAe,CAAEC,QAAQ,CAAiBF,KAAK,CAA9BE,QAAQ,CAAEC,UAAU,CAAKH,KAAK,CAApBG,UAAU,CAC7C,iBAAqC7D,UAAU,CAACC,WAAW,CAAC,CAApDsB,SAAS,cAATA,SAAS,CAAEC,aAAa,cAAbA,aAAa,CAEhC,GAAMO,UAAS,CAAGR,SAAS,CAACC,aAAa,CAACS,GAAG,CAAC,CAC9C,GAAMoB,YAAW,CAAG,EAAE,CAEtB,QAASS,gBAAe,CAACjB,MAAM,CAAE,CAC/B,GAAI,CAACc,eAAe,CAACI,QAAQ,CAAClB,MAAM,CAAC,CAAEe,QAAQ,CAACf,MAAM,CAAC,CAAC,IACnDgB,WAAU,CAAChB,MAAM,CAAC,CACzB,CAEAd,SAAS,CAACuB,OAAO,CAACtC,OAAO,CAAC,SAACuC,MAAM,CAAK,CACpC,GAAIA,MAAM,CAACtB,GAAG,GAAKW,YAAY,CAACC,MAAM,CAAE,MAAO,KAAI,CAAE;AAErD,GAAMb,SAAQ,CAAG2B,eAAe,CAACI,QAAQ,CAACR,MAAM,CAACtB,GAAG,CAAC,CAErDoB,WAAW,CAACjC,IAAI,cACd,KAAC,qBAAqB,EACpB,MAAM,CAAEmC,MAAO,CAEf,QAAQ,CAAEvB,QAAS,CACnB,OAAO,CAAE8B,eAAgB,EAFpBP,MAAM,CAACtB,GAAG,CAGf,CACH,CACH,CAAC,CAAC,CAEF,mBACE,YAAK,SAAS,CAAC,gEAAgE,UAC5EoB,WAAW,EACR,CAEV,CAEA;AACA,MAAO,SAASW,UAAS,EAAG,CAC1B,iBACEhE,UAAU,CAACC,WAAW,CAAC,CADjBsB,SAAS,cAATA,SAAS,CAAEC,aAAa,cAAbA,aAAa,CAAEe,eAAe,cAAfA,eAAe,CAAEZ,WAAW,cAAXA,WAAW,CAE9D,eAAuCjB,SAAS,EAAE,CAA1CuD,WAAW,YAAXA,WAAW,CAAEC,aAAa,YAAbA,aAAa,CAElC,GAAMnC,UAAS,CAAGR,SAAS,CAACC,aAAa,CAACS,GAAG,CAAC,CAC9C,GAAMkC,SAAQ,CAAGpC,SAAS,CAACoC,QAAQ,CAAC5B,eAAe,CAACN,GAAG,CAAC,CAExD,GAAMmC,aAAY,CAAG,EAAE,CACvB,GAAMC,YAAW,CAAG,CAAC,CAAC,CAEtBtC,SAAS,CAACuB,OAAO,CAACtC,OAAO,CAAC,SAACuC,MAAM,CAAK,CACpC,GAAMf,QAAO,CAAGT,SAAS,CAACU,cAAc,CAACC,IAAI,CAC3C,SAACC,KAAK,QAAKA,MAAK,CAACV,GAAG,GAAKsB,MAAM,CAACtB,GAAG,GACpC,CACDoC,WAAW,CAACd,MAAM,CAACtB,GAAG,CAAC,CAAGO,OAAO,CAAG,IAAI,CAAG,KAAK,CAClD,CAAC,CAAC,CAEF;AACA,QAAS8B,eAAc,CAACC,OAAO,CAAE,CAC/B,GAAMC,QAAO,CAAGD,OAAO,CAACC,OAAO,CAC/B,GAAM3D,aAAY,CAAG,EAAE,CACvB,GAAM4D,WAAU,CAAGD,OAAO,CAAC9B,IAAI,CAAC,SAACzB,OAAO,QAAKA,QAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEyD,MAAM,GAAC,CAC7D,GAAMC,aAAY,CAAGH,OAAO,CAACI,KAAK,CAChC,SAAC3D,OAAO,QAAK,CAAAA,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEyD,MAAM,GAAIzD,OAAO,CAACgB,GAAG,GAC5C,CAAE;AACH,GAAI4C,UAAS,CAAG,IAAI,CACpB,GAAIC,YAAW,CAAG,IAAI,CAEtB;AACA,GAAIL,UAAU,EAAIE,YAAY,CAAE,CAC9BG,WAAW,CAAG,CACZC,WAAW,CAAER,OAAO,CACpBS,OAAO,CAAE,CACPf,WAAW,CAAXA,WAAW,CACXC,aAAa,CAAbA,aAAa,CACbe,oBAAoB,CAAEtD,WAAW,CAACsD,oBACpC,CAAC,CACDC,YAAY,CAAE,CACZC,KAAK,CAAE3D,aAAa,CAACS,GAAG,CACxBgB,OAAO,CAAEV,eAAe,CAACN,GAC3B,CAAC,CACDmD,WAAW,CAAEZ,OAAO,CAACa,MAAM,CAAC,SAACC,MAAM,CAAErE,OAAO,CAAEsE,KAAK,CAAK,CACtD,GAAItE,OAAO,CAACyD,MAAM,CAAEY,MAAM,CAAClE,IAAI,CAACmE,KAAK,CAAC,CACtC,MAAOD,OAAM,CACf,CAAC,CAAE,EAAE,CACP,CAAC,CACH,CAEA;AACAd,OAAO,CAACxD,OAAO,CAAC,SAACC,OAAO,CAAK,CAC3B;AACA,GAAIA,OAAO,CAAE,CACXJ,YAAY,CAACO,IAAI,cACf,KAAC,OAAO,EAEN,IAAI,CAAEH,OAAO,CAAC+B,IAAK,CACnB,KAAK,CAAE/B,OAAO,CAACuE,IAAK,CACpB,OAAO,CAAEvE,OAAO,CAACgB,GAAG,CAAG,KAAK,CAAG,IAAK,CACpC,MAAM,CAAEhB,OAAO,CAACyD,MAAQ;AAAA,CACxB,WAAW,CAAEG,SAAS,CAAGC,WAAW,CAAG,IAAM;AAAA,EALxC7D,OAAO,CAACwE,SAAS,CAMtB,CACH,CACH,CACA,GAAIZ,SAAS,CAAEA,SAAS,CAAG,KAAK,CAClC,CAAC,CAAC,CAEF,MAAOhE,aAAY,CACrB,CAEAsD,QAAQ,CAACnD,OAAO,CAAC,SAACuD,OAAO,CAAK,CAC5BH,YAAY,CAAChD,IAAI,cACf,KAAC,MAAM,EACL,SAAS,CAAEmD,OAAO,CAACtC,GAAI,CACvB,MAAM,CAAEsC,OAAO,CAACmB,MAAO,CACvB,SAAS,CAAEnB,OAAO,CAACoB,gBAAiB,CAEpC,OAAO,CAAEpB,OAAO,CAACtC,GAAG,CAAG,KAAK,CAAG,IAAK,CACpC,QAAQ,CAAEsC,OAAO,CAACqB,QAAS,CAC3B,KAAK,CAAErB,OAAO,CAACsB,KAAM,UAEpBvB,cAAc,CAACC,OAAO,CAAC,EALnBA,OAAO,CAACoB,gBAAgB,CAMtB,CACV,CACH,CAAC,CAAC,CACF,MAAOvB,aAAY,CACrB"},"metadata":{},"sourceType":"module","externalDependencies":[]}