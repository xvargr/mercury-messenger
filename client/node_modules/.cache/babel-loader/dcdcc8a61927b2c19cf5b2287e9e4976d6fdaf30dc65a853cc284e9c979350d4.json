{"ast":null,"code":"import _objectSpread from\"/home/agreus/Documents/webdev/mercury-messenger/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/home/agreus/Documents/webdev/mercury-messenger/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/agreus/Documents/webdev/mercury-messenger/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useRef,useState,useEffect,forwardRef,useContext}from\"react\";import moment from\"moment/moment\";// svg\nimport{AtSymbolIcon,CameraIcon,XIcon,PaperAirplaneIcon,CheckIcon,ReplyIcon}from\"@heroicons/react/outline\";// context\nimport{ReplyContext}from\"../context/RepliesContext\";// components\nimport{MentionsSelector}from\"../../utils/iterableComponents\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AttachImageButton=/*#__PURE__*/forwardRef(function AttachImageButton(props,ref){return/*#__PURE__*/_jsxs(\"label\",{className:\"mx-1\",children:[/*#__PURE__*/_jsx(CameraIcon,{className:\"h-6 w-6 text-gray-800 hover:text-gray-700 cursor-pointer\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"chatImage\",id:\"chatImage\",className:\"sr-only\",accept:\".jpg, .jpeg, .png, .gif\",onChange:function onChange(e){props.validate({field:\"file\",input:e.target.files[0]});props.onChange(e);},ref:ref})]});});function AddMentionsButton(props){var passSelection=props.passSelection;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),expanded=_useState2[0],setExpanded=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selectedMembers=_useState4[0],setSelectedMembers=_useState4[1];var _useContext=useContext(ReplyContext),getReply=_useContext.getReply;function addSelection(id){setSelectedMembers(function(prevData){var dataCopy=_toConsumableArray(prevData);dataCopy.push(id);return dataCopy;});}function removeSelection(id){setSelectedMembers(function(prevData){var dataCopy=_toConsumableArray(prevData);dataCopy.push(id);return dataCopy.filter(function(selectedId){return selectedId!==id;});});}return/*#__PURE__*/_jsxs(_Fragment,{children:[!expanded||/*#__PURE__*/_jsxs(\"div\",{className:\"h-[8.25rem] w-1/2 min-w-[10rem] p-1 absolute \".concat(getReply?\"-top-[10.25rem]\":\"-top-[8.75rem]\",\" left-0 bg-gray-500 backdrop-blur-sm bg-opacity-70 rounded-lg shadow-md flex flex-col overflow-hidden\"),children:[/*#__PURE__*/_jsx(MentionsSelector,{selectedMembers:selectedMembers,onSelect:addSelection,onDeselect:removeSelection}),/*#__PURE__*/_jsx(CheckIcon,{className:\"w-7 absolute bottom-0 right-0 p-0.5 bg-green-500 text-gray-700 rounded-tl-xl hover:bg-green-400 cursor-pointer\",onClick:function onClick(){passSelection(selectedMembers);setExpanded(false);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"relative\",children:/*#__PURE__*/_jsx(AtSymbolIcon,{className:\"h-6 w-6 mr-2 text-gray-800 hover:text-gray-700 cursor-pointer\",onClick:function onClick(){if(expanded)passSelection(selectedMembers);setExpanded(!expanded);}})})]});}function SubmitButton(props){var onClick=props.onClick,errorState=props.errorState;var _useState5=useState(\"opacity-0\"),_useState6=_slicedToArray(_useState5,2),errorOpacity=_useState6[0],setErrorOpacity=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),submitButtonStyle=_useState8[0],setSubmitButtonStyle=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),lastError=_useState10[0],setLastError=_useState10[1];useEffect(function(){if(errorState.fileError||errorState.textError){setErrorOpacity(\"opacity-100\");setSubmitButtonStyle(\"text-mexican-red-600 opacity-70\");setLastError(errorState.textError||errorState.fileError);}else{setErrorOpacity(\"opacity-0\");setSubmitButtonStyle(\"text-gray-800 hover:text-gray-700 cursor-pointer\");}},[errorState]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PaperAirplaneIcon,{className:\"\".concat(submitButtonStyle,\" h-6 w-6 shrink-0 rotate-90\"),onClick:onClick}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(errorOpacity,\" h-8 p-1 absolute right-5 -top-10 bg-mexican-red-500 text-gray-200 font-semibold rounded-lg rounded-br-none shadow-md overflow-clip transition-opacity duration-200 ease-in\"),children:lastError})]});}function ChatInputBox(props){var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),imageAttached=_useState12[0],setImageAttached=_useState12[1];var _useState13=useState(true),_useState14=_slicedToArray(_useState13,2),imageLoading=_useState14[0],setImageLoading=_useState14[1];var _useState15=useState({textError:null,fileError:null}),_useState16=_slicedToArray(_useState15,2),inputError=_useState16[0],setInputError=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),mentionsArray=_useState18[0],setMentionsArray=_useState18[1];var _useContext2=useContext(ReplyContext),getReply=_useContext2.getReply,clearReply=_useContext2.clearReply;var textRef=useRef();var fileRef=useRef();var imagePreviewRef=useRef();useEffect(function(){if(window.innerWidth>=768)textRef.current.focus();},[]);// eslint-disable-next-line\nuseEffect(function(){if(fileRef.current.value)setImageAttached(true);else setImageAttached(false);});function returnMessageData(e){e.preventDefault();var noError=!inputError.textError&&!inputError.fileError;var formHasContent=textRef.current.value.length||fileRef.current.value;if(formHasContent&&noError){var messageData={mentions:mentionsArray,reply:(getReply===null||getReply===void 0?void 0:getReply.clusterId)||null,text:textRef.current.value||null,file:fileRef.current.files[0]||null,dateString:moment().format(),timestamp:Date.now()};textRef.current.value=null;fileRef.current.value=null;setMentionsArray([]);clearReply();props.return(messageData);}}function validateInput(params){var field=params.field,input=params.input;if(field===\"text\"){setInputError(function(prevData){var dataCopy=_objectSpread({},prevData);if(input.length>250){dataCopy.textError=\"Message exceeds 250 characters\";}else{dataCopy.textError=null;}return dataCopy;});}if(field===\"file\"){setInputError(function(prevData){var dataCopy=_objectSpread({},prevData);if(input.size>3e6){dataCopy.fileError=\"File exceeds 3MB\";}else{dataCopy.fileError=null;}return dataCopy;});}}function updateImageInput(e){var selectedImage=e.target.files[0];setImageLoading(true);if(selectedImage){var fileReader=new FileReader();fileReader.onload=function(e){imagePreviewRef.current={image:e.target.result,filename:selectedImage.name};setImageLoading(false);};fileReader.readAsDataURL(e.target.files[0]);}}function BlurBackdrop(){var blurHeight;if(imageAttached)blurHeight=\"h-[16rem]\";else blurHeight=\"h-[14%] max-h-32\";return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full ml-2  \".concat(blurHeight,\" backdrop-blur-sm bottom-0 -left-2 absolute pointer-events-none blurMask45\")}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full ml-2 \".concat(blurHeight,\" bg-gray-600 bottom-0 -left-2 absolute pointer-events-none blurMask70\")})]});}function ReplyBar(){return/*#__PURE__*/_jsxs(\"div\",{className:\"h-6 px-2 bg-gray-500 rounded-t-lg absolute -top-6 left-0 flex group\",children:[/*#__PURE__*/_jsx(XIcon,{className:\"w-5 text-mexican-red-600 bg-gray-500 cursor-pointer absolute left-2 top-0.5 opacity-0 group-hover:opacity-100 transition-opacity duration-100 ease-linear\",onClick:function onClick(){return clearReply();}}),/*#__PURE__*/_jsx(ReplyIcon,{className:\"w-5 mr-1 text-gray-800\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"replying to \",getReply.name]})]});}function ChatImagePreview(){function handleClearImage(){fileRef.current.value=null;setImageAttached(false);setInputError(function(prevData){var dataCopy=_objectSpread({},prevData);dataCopy.fileError=null;return dataCopy;});}if(!imageAttached)return null;if(imageLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-36 p-4 absolute top-0 flex items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-28 h-28 p-1 bg-gray-600 rounded-md flex flex-col justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full overflow-hidden text-gray-200\",children:\"loading...\"}),/*#__PURE__*/_jsx(XIcon,{className:\"h-6 w-6 text-mexican-red-500 hover:text-mexican-red-400 cursor-pointer\",onClick:function onClick(){fileRef.current.value=null;setImageAttached(false);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"h-[5rem] w-full bg-gray-700 object-cover rounded-b-md animate-pulse\"})]})});}else{var _imagePreviewRef$curr;return/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-36 p-4 absolute top-0 flex items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-28 h-28 p-1 bg-gray-600 rounded-md flex flex-col justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-28 h-6 text-gray-200 overflow-hidden\",children:(_imagePreviewRef$curr=imagePreviewRef.current)===null||_imagePreviewRef$curr===void 0?void 0:_imagePreviewRef$curr.filename}),/*#__PURE__*/_jsx(XIcon,{className:\"h-6 w-6 text-mexican-red-500 hover:text-mexican-red-400 cursor-pointer\",onClick:handleClearImage})]}),/*#__PURE__*/_jsx(\"img\",{src:imagePreviewRef.current.image,alt:\"preview\",className:\"h-[5rem] object-cover rounded-b-md\"})]})});}}return/*#__PURE__*/_jsxs(\"form\",{className:\"flex justify-center\",onSubmit:returnMessageData,children:[/*#__PURE__*/_jsx(BlurBackdrop,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-[90%] md:w-4/5 max-w-4xl \".concat(!imageAttached||\"h-[10.5rem]\",\" m-4 p-2 bg-gray-500 rounded-lg \").concat(!getReply||\"rounded-tl-none\",\" flex justify-around items-end shadow-lg absolute bottom-1\"),children:[!getReply||/*#__PURE__*/_jsx(ReplyBar,{}),/*#__PURE__*/_jsx(ChatImagePreview,{}),!mentionsArray.length>0||/*#__PURE__*/_jsx(\"div\",{className:\"w-6 h-6 absolute bottom-2 left-2 bg-amber-500 font-semibold rounded-full shadow-md flex justify-center items-center overflow-clip z-10 pointer-events-none\",children:mentionsArray.length}),/*#__PURE__*/_jsx(AddMentionsButton,{passSelection:function passSelection(selection){return setMentionsArray(selection);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"text\",ref:textRef,placeholder:\"Say something...\",autoComplete:\"off\",className:\"bg-inherit focus:outline-none flex-grow font-nunito\",onChange:function onChange(e){return validateInput({field:\"text\",input:e.target.value});}}),/*#__PURE__*/_jsx(AttachImageButton,{onChange:updateImageInput,validate:validateInput,ref:fileRef}),/*#__PURE__*/_jsx(SubmitButton,{onClick:returnMessageData,errorState:inputError})]})]});}export default ChatInputBox;","map":{"version":3,"names":["useRef","useState","useEffect","forwardRef","useContext","moment","AtSymbolIcon","CameraIcon","XIcon","PaperAirplaneIcon","CheckIcon","ReplyIcon","ReplyContext","MentionsSelector","AttachImageButton","props","ref","e","validate","field","input","target","files","onChange","AddMentionsButton","passSelection","expanded","setExpanded","selectedMembers","setSelectedMembers","getReply","addSelection","id","prevData","dataCopy","push","removeSelection","filter","selectedId","SubmitButton","onClick","errorState","errorOpacity","setErrorOpacity","submitButtonStyle","setSubmitButtonStyle","lastError","setLastError","fileError","textError","ChatInputBox","imageAttached","setImageAttached","imageLoading","setImageLoading","inputError","setInputError","mentionsArray","setMentionsArray","clearReply","textRef","fileRef","imagePreviewRef","window","innerWidth","current","focus","value","returnMessageData","preventDefault","noError","formHasContent","length","messageData","mentions","reply","clusterId","text","file","dateString","format","timestamp","Date","now","return","validateInput","params","size","updateImageInput","selectedImage","fileReader","FileReader","onload","image","result","filename","name","readAsDataURL","BlurBackdrop","blurHeight","ReplyBar","ChatImagePreview","handleClearImage","selection"],"sources":["/home/agreus/Documents/webdev/mercury-messenger/client/src/components/chat/ChatInputBox.js"],"sourcesContent":["import { useRef, useState, useEffect, forwardRef, useContext } from \"react\";\nimport moment from \"moment/moment\";\n\n// svg\nimport {\n  AtSymbolIcon,\n  CameraIcon,\n  XIcon,\n  PaperAirplaneIcon,\n  CheckIcon,\n  ReplyIcon,\n} from \"@heroicons/react/outline\";\n\n// context\nimport { ReplyContext } from \"../context/RepliesContext\";\n\n// components\nimport { MentionsSelector } from \"../../utils/iterableComponents\";\n\nconst AttachImageButton = forwardRef(function AttachImageButton(props, ref) {\n  return (\n    <label className=\"mx-1\">\n      <CameraIcon className=\"h-6 w-6 text-gray-800 hover:text-gray-700 cursor-pointer\" />\n      <input\n        type=\"file\"\n        name=\"chatImage\"\n        id=\"chatImage\"\n        className=\"sr-only\"\n        accept=\".jpg, .jpeg, .png, .gif\"\n        onChange={(e) => {\n          props.validate({ field: \"file\", input: e.target.files[0] });\n          props.onChange(e);\n        }}\n        ref={ref}\n      ></input>\n    </label>\n  );\n});\n\nfunction AddMentionsButton(props) {\n  const { passSelection } = props;\n  const [expanded, setExpanded] = useState(false);\n  const [selectedMembers, setSelectedMembers] = useState([]);\n\n  const { getReply } = useContext(ReplyContext);\n\n  function addSelection(id) {\n    setSelectedMembers((prevData) => {\n      const dataCopy = [...prevData];\n      dataCopy.push(id);\n      return dataCopy;\n    });\n  }\n\n  function removeSelection(id) {\n    setSelectedMembers((prevData) => {\n      const dataCopy = [...prevData];\n      dataCopy.push(id);\n      return dataCopy.filter((selectedId) => selectedId !== id);\n    });\n  }\n\n  return (\n    <>\n      {!expanded || (\n        <div\n          className={`h-[8.25rem] w-1/2 min-w-[10rem] p-1 absolute ${\n            getReply ? \"-top-[10.25rem]\" : \"-top-[8.75rem]\"\n          } left-0 bg-gray-500 backdrop-blur-sm bg-opacity-70 rounded-lg shadow-md flex flex-col overflow-hidden`}\n        >\n          <MentionsSelector\n            selectedMembers={selectedMembers}\n            onSelect={addSelection}\n            onDeselect={removeSelection}\n          />\n          <CheckIcon\n            className=\"w-7 absolute bottom-0 right-0 p-0.5 bg-green-500 text-gray-700 rounded-tl-xl hover:bg-green-400 cursor-pointer\"\n            onClick={() => {\n              passSelection(selectedMembers);\n              setExpanded(false);\n            }}\n          />\n        </div>\n      )}\n      <div className=\"relative\">\n        <AtSymbolIcon\n          className=\"h-6 w-6 mr-2 text-gray-800 hover:text-gray-700 cursor-pointer\"\n          onClick={() => {\n            if (expanded) passSelection(selectedMembers);\n            setExpanded(!expanded);\n          }}\n        />\n      </div>\n    </>\n  );\n}\n\nfunction SubmitButton(props) {\n  const { onClick, errorState } = props;\n  const [errorOpacity, setErrorOpacity] = useState(\"opacity-0\");\n  const [submitButtonStyle, setSubmitButtonStyle] = useState();\n  const [lastError, setLastError] = useState();\n\n  useEffect(() => {\n    if (errorState.fileError || errorState.textError) {\n      setErrorOpacity(\"opacity-100\");\n      setSubmitButtonStyle(\"text-mexican-red-600 opacity-70\");\n      setLastError(errorState.textError || errorState.fileError);\n    } else {\n      setErrorOpacity(\"opacity-0\");\n      setSubmitButtonStyle(\"text-gray-800 hover:text-gray-700 cursor-pointer\");\n    }\n  }, [errorState]);\n\n  return (\n    <>\n      <PaperAirplaneIcon\n        className={`${submitButtonStyle} h-6 w-6 shrink-0 rotate-90`}\n        onClick={onClick}\n      />\n      <div\n        className={`${errorOpacity} h-8 p-1 absolute right-5 -top-10 bg-mexican-red-500 text-gray-200 font-semibold rounded-lg rounded-br-none shadow-md overflow-clip transition-opacity duration-200 ease-in`}\n      >\n        {lastError}\n      </div>\n    </>\n  );\n}\n\nfunction ChatInputBox(props) {\n  const [imageAttached, setImageAttached] = useState(false);\n  const [imageLoading, setImageLoading] = useState(true);\n  const [inputError, setInputError] = useState({\n    textError: null,\n    fileError: null,\n  });\n  const [mentionsArray, setMentionsArray] = useState([]);\n\n  const { getReply, clearReply } = useContext(ReplyContext);\n\n  const textRef = useRef();\n  const fileRef = useRef();\n  const imagePreviewRef = useRef();\n\n  useEffect(() => {\n    if (window.innerWidth >= 768) textRef.current.focus();\n  }, []);\n\n  // eslint-disable-next-line\n  useEffect(() => {\n    if (fileRef.current.value) setImageAttached(true);\n    else setImageAttached(false);\n  });\n\n  function returnMessageData(e) {\n    e.preventDefault();\n\n    const noError = !inputError.textError && !inputError.fileError;\n    const formHasContent =\n      textRef.current.value.length || fileRef.current.value;\n\n    if (formHasContent && noError) {\n      const messageData = {\n        mentions: mentionsArray,\n        reply: getReply?.clusterId || null,\n        text: textRef.current.value || null,\n        file: fileRef.current.files[0] || null,\n        dateString: moment().format(),\n        timestamp: Date.now(),\n      };\n\n      textRef.current.value = null;\n      fileRef.current.value = null;\n      setMentionsArray([]);\n\n      clearReply();\n      props.return(messageData);\n    }\n  }\n\n  function validateInput(params) {\n    const { field, input } = params;\n\n    if (field === \"text\") {\n      setInputError((prevData) => {\n        const dataCopy = { ...prevData };\n\n        if (input.length > 250) {\n          dataCopy.textError = \"Message exceeds 250 characters\";\n        } else {\n          dataCopy.textError = null;\n        }\n        return dataCopy;\n      });\n    }\n\n    if (field === \"file\") {\n      setInputError((prevData) => {\n        const dataCopy = { ...prevData };\n\n        if (input.size > 3e6) {\n          dataCopy.fileError = \"File exceeds 3MB\";\n        } else {\n          dataCopy.fileError = null;\n        }\n        return dataCopy;\n      });\n    }\n  }\n\n  function updateImageInput(e) {\n    const selectedImage = e.target.files[0];\n    setImageLoading(true);\n\n    if (selectedImage) {\n      const fileReader = new FileReader();\n      fileReader.onload = (e) => {\n        imagePreviewRef.current = {\n          image: e.target.result,\n          filename: selectedImage.name,\n        };\n\n        setImageLoading(false);\n      };\n      fileReader.readAsDataURL(e.target.files[0]);\n    }\n  }\n\n  function BlurBackdrop() {\n    let blurHeight;\n    if (imageAttached) blurHeight = \"h-[16rem]\";\n    else blurHeight = \"h-[14%] max-h-32\";\n\n    return (\n      <>\n        <div\n          className={`w-full ml-2  ${blurHeight} backdrop-blur-sm bottom-0 -left-2 absolute pointer-events-none blurMask45`}\n        ></div>\n        <div\n          className={`w-full ml-2 ${blurHeight} bg-gray-600 bottom-0 -left-2 absolute pointer-events-none blurMask70`}\n        ></div>\n      </>\n    );\n  }\n\n  function ReplyBar() {\n    return (\n      <div className=\"h-6 px-2 bg-gray-500 rounded-t-lg absolute -top-6 left-0 flex group\">\n        <XIcon\n          className=\"w-5 text-mexican-red-600 bg-gray-500 cursor-pointer absolute left-2 top-0.5 opacity-0 group-hover:opacity-100 transition-opacity duration-100 ease-linear\"\n          onClick={() => clearReply()}\n        />\n        <ReplyIcon className=\"w-5 mr-1 text-gray-800\" />\n        <div>replying to {getReply.name}</div>\n      </div>\n    );\n  }\n\n  function ChatImagePreview() {\n    function handleClearImage() {\n      fileRef.current.value = null;\n      setImageAttached(false);\n      setInputError((prevData) => {\n        const dataCopy = { ...prevData };\n        dataCopy.fileError = null;\n        return dataCopy;\n      });\n    }\n\n    if (!imageAttached) return null;\n\n    if (imageLoading) {\n      return (\n        <div className=\"w-full h-36 p-4 absolute top-0 flex items-center\">\n          <div className=\"w-28 h-28 p-1 bg-gray-600 rounded-md flex flex-col justify-between\">\n            <div className=\"flex\">\n              <div className=\"w-full overflow-hidden text-gray-200\">\n                loading...\n              </div>\n              <XIcon\n                className=\"h-6 w-6 text-mexican-red-500 hover:text-mexican-red-400 cursor-pointer\"\n                onClick={() => {\n                  fileRef.current.value = null;\n                  setImageAttached(false);\n                }}\n              />\n            </div>\n            <div className=\"h-[5rem] w-full bg-gray-700 object-cover rounded-b-md animate-pulse\"></div>\n          </div>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"w-full h-36 p-4 absolute top-0 flex items-center\">\n          <div className=\"w-28 h-28 p-1 bg-gray-600 rounded-md flex flex-col justify-between\">\n            <div className=\"flex\">\n              <div className=\"w-28 h-6 text-gray-200 overflow-hidden\">\n                {imagePreviewRef.current?.filename}\n              </div>\n              <XIcon\n                className=\"h-6 w-6 text-mexican-red-500 hover:text-mexican-red-400 cursor-pointer\"\n                onClick={handleClearImage}\n              />\n            </div>\n            <img\n              src={imagePreviewRef.current.image}\n              alt=\"preview\"\n              className=\"h-[5rem] object-cover rounded-b-md\"\n            />\n          </div>\n        </div>\n      );\n    }\n  }\n\n  return (\n    <form className=\"flex justify-center\" onSubmit={returnMessageData}>\n      <BlurBackdrop />\n\n      <div\n        className={`w-[90%] md:w-4/5 max-w-4xl ${\n          !imageAttached || \"h-[10.5rem]\"\n        } m-4 p-2 bg-gray-500 rounded-lg ${\n          !getReply || \"rounded-tl-none\"\n        } flex justify-around items-end shadow-lg absolute bottom-1`}\n      >\n        {!getReply || <ReplyBar />}\n\n        <ChatImagePreview />\n\n        {!mentionsArray.length > 0 || (\n          <div className=\"w-6 h-6 absolute bottom-2 left-2 bg-amber-500 font-semibold rounded-full shadow-md flex justify-center items-center overflow-clip z-10 pointer-events-none\">\n            {mentionsArray.length}\n          </div>\n        )}\n\n        <AddMentionsButton\n          passSelection={(selection) => setMentionsArray(selection)}\n        />\n\n        <input\n          type=\"text\"\n          id=\"text\"\n          ref={textRef}\n          placeholder=\"Say something...\"\n          autoComplete=\"off\"\n          className=\"bg-inherit focus:outline-none flex-grow font-nunito\"\n          onChange={(e) =>\n            validateInput({ field: \"text\", input: e.target.value })\n          }\n        />\n\n        <AttachImageButton\n          onChange={updateImageInput}\n          validate={validateInput}\n          ref={fileRef}\n        />\n\n        <SubmitButton onClick={returnMessageData} errorState={inputError} />\n      </div>\n    </form>\n  );\n}\n\nexport default ChatInputBox;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}