{"ast":null,"code":"var _jsxFileName = \"/home/agreus/Documents/webdev/mercury-messenger/client/src/components/chat/SenderWrapper.js\",\n  _s = $RefreshSig$();\nimport { useContext, useState } from \"react\";\nimport moment from \"moment/moment\";\nimport { ReplyIcon } from \"@heroicons/react/outline\";\nimport ReplyViewer from \"./ReplyViewer\";\nimport { ReplyContext } from \"../context/RepliesContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Sender(props) {\n  _s();\n  const {\n    sender,\n    children,\n    timestamp,\n    pending,\n    mentions,\n    reply,\n    clusterId\n  } = props;\n  const [replyExpanded, setReplyExpanded] = useState(false);\n  const {\n    setReply\n  } = useContext(ReplyContext);\n  const userMentioned = pending ? false : mentions.some(user => user._id === localStorage.userId);\n  const userReplied = pending || !reply ? false : reply.sender._id === localStorage.userId && sender._id !== localStorage.userId;\n  let timeText;\n  if (timestamp > Date.now() || Date.now() - timestamp < 30000) {\n    timeText = \"just now\";\n  } else if (Date.now() - timestamp < 1.8e6) {\n    timeText = moment(timestamp).fromNow();\n  } else timeText = moment(timestamp).calendar();\n  let emphasis;\n  let emphasisBackground;\n  if (userReplied) {\n    emphasis = \"bg-sky-500\";\n    emphasisBackground = \"bg-sky-500 hover:bg-sky-400 bg-opacity-20 hover:bg-opacity-30\";\n  } else if (userMentioned) {\n    emphasis = \"bg-amber-500\";\n    emphasisBackground = \"bg-amber-500 hover:bg-amber-400 bg-opacity-20 hover:bg-opacity-30\";\n  } else {\n    emphasis = \"\";\n    emphasisBackground = \"hover:bg-gray-700\";\n  }\n  function renderMentions() {\n    const mentionedNames = mentions.map(user => user.username);\n    const stack = mentionedNames.reduce((accumulator, username, index) => {\n      if (index < 2) {\n        accumulator.push( /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [username, index === mentionedNames.length - 1 || \",\"]\n        }, username, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this));\n      } else if (index === 2) {\n        accumulator.push( /*#__PURE__*/_jsxDEV(\"span\", {\n          title: mentionedNames.slice(2, mentionedNames.length),\n          children: [\"+ \", mentionedNames.length - 2, \" more\"]\n        }, username, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this));\n      }\n      return accumulator;\n    }, []);\n    return stack;\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [!replyExpanded || /*#__PURE__*/_jsxDEV(ReplyViewer, {\n      reply: reply\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 26\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${emphasisBackground} pr-3 flex bg-opacity-25 group relative`,\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: `w-1 mr-2 ${emphasis} shrink-0`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex mt-2 mb-2 w-full relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: sender.userImage.thumbnailMedium,\n          alt: \"profile\",\n          className: `w-12 h-12 mr-2 rounded-full self-start shrink-0 ${pending ? \"opacity-50\" : null}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), pending || /*#__PURE__*/_jsxDEV(ReplyIcon, {\n          className: \"h-6 w-6 p-0.5 text-gray-800 bg-gray-500 hover:bg-gray-400 shadow-md opacity-0 group-hover:opacity-100 rounded-full absolute top-7 left-0 transition-opacity duration-75 ease-linear cursor-pointer\",\n          onClick: () => setReply({\n            clusterId,\n            name: sender.username\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"w-full flex flex-col overflow-hidden\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: `font-kanit flex items-center ${pending ? \"opacity-50\" : null} overflow-hidden`,\n              style: {\n                color: sender.userColor\n              },\n              children: [sender.username, !reply || /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"h-4 max-w-[10rem] md:max-w-[15rem] lg:max-w-[20rem] text-gray-800 group-hover:text-gray-900 pl-1 text-sm flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(ReplyIcon, {\n                  className: \"w-3 mr-0.5 inline -scale-x-100 shrink-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"hover:underline cursor-pointer truncate\",\n                  onMouseEnter: () => setReplyExpanded(true),\n                  onMouseLeave: () => setReplyExpanded(false),\n                  children: [reply.sender.username, \" - \\\"\", reply.lastMessage.text, \"\\\"\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 19\n              }, this), !(mentions !== null && mentions !== void 0 && mentions.length) > 0 || /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-800 pl-1 text-sm\",\n                children: [\"@\", renderMentions()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm opacity-60 shrink-0\",\n              children: timeText\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this), children]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Sender, \"2GgJVRdNnazdWfTauGtTtyDk63M=\");\n_c = Sender;\nexport default Sender;\nvar _c;\n$RefreshReg$(_c, \"Sender\");","map":{"version":3,"names":["useContext","useState","moment","ReplyIcon","ReplyViewer","ReplyContext","Sender","props","sender","children","timestamp","pending","mentions","reply","clusterId","replyExpanded","setReplyExpanded","setReply","userMentioned","some","user","_id","localStorage","userId","userReplied","timeText","Date","now","fromNow","calendar","emphasis","emphasisBackground","renderMentions","mentionedNames","map","username","stack","reduce","accumulator","index","push","length","slice","userImage","thumbnailMedium","name","color","userColor","lastMessage","text"],"sources":["/home/agreus/Documents/webdev/mercury-messenger/client/src/components/chat/SenderWrapper.js"],"sourcesContent":["import { useContext, useState } from \"react\";\nimport moment from \"moment/moment\";\n\nimport { ReplyIcon } from \"@heroicons/react/outline\";\n\nimport ReplyViewer from \"./ReplyViewer\";\n\nimport { ReplyContext } from \"../context/RepliesContext\";\n\nfunction Sender(props) {\n  const { sender, children, timestamp, pending, mentions, reply, clusterId } =\n    props;\n\n  const [replyExpanded, setReplyExpanded] = useState(false);\n\n  const { setReply } = useContext(ReplyContext);\n\n  const userMentioned = pending\n    ? false\n    : mentions.some((user) => user._id === localStorage.userId);\n\n  const userReplied =\n    pending || !reply\n      ? false\n      : reply.sender._id === localStorage.userId &&\n        sender._id !== localStorage.userId;\n\n  let timeText;\n  if (timestamp > Date.now() || Date.now() - timestamp < 30000) {\n    timeText = \"just now\";\n  } else if (Date.now() - timestamp < 1.8e6) {\n    timeText = moment(timestamp).fromNow();\n  } else timeText = moment(timestamp).calendar();\n\n  let emphasis;\n  let emphasisBackground;\n  if (userReplied) {\n    emphasis = \"bg-sky-500\";\n    emphasisBackground =\n      \"bg-sky-500 hover:bg-sky-400 bg-opacity-20 hover:bg-opacity-30\";\n  } else if (userMentioned) {\n    emphasis = \"bg-amber-500\";\n    emphasisBackground =\n      \"bg-amber-500 hover:bg-amber-400 bg-opacity-20 hover:bg-opacity-30\";\n  } else {\n    emphasis = \"\";\n    emphasisBackground = \"hover:bg-gray-700\";\n  }\n\n  function renderMentions() {\n    const mentionedNames = mentions.map((user) => user.username);\n    const stack = mentionedNames.reduce((accumulator, username, index) => {\n      if (index < 2) {\n        accumulator.push(\n          <span key={username}>\n            {username}\n            {index === mentionedNames.length - 1 || \",\"}\n          </span>\n        );\n      } else if (index === 2) {\n        accumulator.push(\n          <span\n            key={username}\n            title={mentionedNames.slice(2, mentionedNames.length)}\n          >\n            + {mentionedNames.length - 2} more\n          </span>\n        );\n      }\n      return accumulator;\n    }, []);\n    return stack;\n  }\n\n  return (\n    <>\n      {!replyExpanded || <ReplyViewer reply={reply} />}\n      <div\n        className={`${emphasisBackground} pr-3 flex bg-opacity-25 group relative`}\n      >\n        <span className={`w-1 mr-2 ${emphasis} shrink-0`}></span>\n        <div className=\"flex mt-2 mb-2 w-full relative\">\n          <img\n            src={sender.userImage.thumbnailMedium}\n            alt=\"profile\"\n            className={`w-12 h-12 mr-2 rounded-full self-start shrink-0 ${\n              pending ? \"opacity-50\" : null\n            }`}\n          />\n          {pending || (\n            <ReplyIcon\n              className=\"h-6 w-6 p-0.5 text-gray-800 bg-gray-500 hover:bg-gray-400 shadow-md opacity-0 group-hover:opacity-100 rounded-full absolute top-7 left-0 transition-opacity duration-75 ease-linear cursor-pointer\"\n              onClick={() => setReply({ clusterId, name: sender.username })}\n            />\n          )}\n          <span className=\"w-full flex flex-col overflow-hidden\">\n            <div className=\"flex justify-between items-center\">\n              <span\n                className={`font-kanit flex items-center ${\n                  pending ? \"opacity-50\" : null\n                } overflow-hidden`}\n                style={{ color: sender.userColor }}\n              >\n                {sender.username}\n                {!reply || (\n                  <span className=\"h-4 max-w-[10rem] md:max-w-[15rem] lg:max-w-[20rem] text-gray-800 group-hover:text-gray-900 pl-1 text-sm flex items-center\">\n                    <ReplyIcon className=\"w-3 mr-0.5 inline -scale-x-100 shrink-0\" />\n                    <span\n                      className=\"hover:underline cursor-pointer truncate\"\n                      onMouseEnter={() => setReplyExpanded(true)}\n                      onMouseLeave={() => setReplyExpanded(false)}\n                    >\n                      {reply.sender.username} - \"{reply.lastMessage.text}\"\n                    </span>\n                  </span>\n                )}\n                {!mentions?.length > 0 || (\n                  <span className=\"text-gray-800 pl-1 text-sm\">\n                    @{renderMentions()}\n                  </span>\n                )}\n              </span>\n              <span className=\"text-sm opacity-60 shrink-0\">{timeText}</span>\n            </div>\n            {children}\n          </span>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default Sender;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}