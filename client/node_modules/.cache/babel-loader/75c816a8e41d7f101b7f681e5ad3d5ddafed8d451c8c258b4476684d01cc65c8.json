{"ast":null,"code":"import _toConsumableArray from\"/home/agreus/Documents/webdev/mercury-messenger/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/agreus/Documents/webdev/mercury-messenger/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,createContext}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export var FlashContext=/*#__PURE__*/createContext();export function FlashStateProvider(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),flashMessages=_useState2[0],setFlashMessages=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messageStack=_useState4[0],setMessageStack=_useState4[1];// if flash messages are received, move them to the temp array context to be rendered and shown\nuseEffect(function(){// if the local message stack is not the same as in context, move it\nif(flashMessages.length>0){if(flashMessages[0]!==messageStack[0]||flashMessages.length!==messageStack.length){setMessageStack(function(prevMessages){return[].concat(_toConsumableArray(prevMessages),_toConsumableArray(flashMessages));});setFlashMessages([]);}}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[flashMessages]);function pushFlashMessage(messageArray){setFlashMessages(function(prevMessages){return[].concat(_toConsumableArray(prevMessages),_toConsumableArray(messageArray));});}function unmountFlash(position){var messagesHelper=_toConsumableArray(messageStack);//  spread the array to create a new array instead of saving the pointer\nmessagesHelper.splice(position,1);setMessageStack(messagesHelper);}var flashState={flashMessages:flashMessages,setFlashMessages:setFlashMessages,pushFlashMessage:pushFlashMessage,messageStack:messageStack,unmountFlash:unmountFlash};return/*#__PURE__*/_jsx(FlashContext.Provider,{value:flashState,children:props.children});}","map":{"version":3,"names":["useState","useEffect","createContext","FlashContext","FlashStateProvider","props","flashMessages","setFlashMessages","messageStack","setMessageStack","length","prevMessages","pushFlashMessage","messageArray","unmountFlash","position","messagesHelper","splice","flashState","children"],"sources":["/home/agreus/Documents/webdev/mercury-messenger/client/src/components/context/FlashContext.js"],"sourcesContent":["import { useState, useEffect, createContext } from \"react\";\nexport const FlashContext = createContext();\n\nexport function FlashStateProvider(props) {\n  const [flashMessages, setFlashMessages] = useState([]);\n  const [messageStack, setMessageStack] = useState([]);\n\n  // if flash messages are received, move them to the temp array context to be rendered and shown\n  useEffect(() => {\n    // if the local message stack is not the same as in context, move it\n    if (flashMessages.length > 0) {\n      if (\n        flashMessages[0] !== messageStack[0] ||\n        flashMessages.length !== messageStack.length\n      ) {\n        setMessageStack((prevMessages) => [...prevMessages, ...flashMessages]);\n        setFlashMessages([]);\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [flashMessages]);\n\n  function pushFlashMessage(messageArray) {\n    setFlashMessages((prevMessages) => [...prevMessages, ...messageArray]);\n  }\n\n  function unmountFlash(position) {\n    const messagesHelper = [...messageStack]; //  spread the array to create a new array instead of saving the pointer\n    messagesHelper.splice(position, 1);\n\n    setMessageStack(messagesHelper);\n  }\n\n  const flashState = {\n    flashMessages,\n    setFlashMessages,\n    pushFlashMessage,\n    messageStack,\n    unmountFlash,\n  };\n\n  return (\n    <FlashContext.Provider value={flashState}>\n      {props.children}\n    </FlashContext.Provider>\n  );\n}\n"],"mappings":"gSAAA,OAASA,QAAQ,CAAEC,SAAS,CAAEC,aAAa,KAAQ,OAAO,CAAC,2CAC3D,MAAO,IAAMC,aAAY,cAAGD,aAAa,EAAE,CAE3C,MAAO,SAASE,mBAAkB,CAACC,KAAK,CAAE,CACxC,cAA0CL,QAAQ,CAAC,EAAE,CAAC,wCAA/CM,aAAa,eAAEC,gBAAgB,eACtC,eAAwCP,QAAQ,CAAC,EAAE,CAAC,yCAA7CQ,YAAY,eAAEC,eAAe,eAEpC;AACAR,SAAS,CAAC,UAAM,CACd;AACA,GAAIK,aAAa,CAACI,MAAM,CAAG,CAAC,CAAE,CAC5B,GACEJ,aAAa,CAAC,CAAC,CAAC,GAAKE,YAAY,CAAC,CAAC,CAAC,EACpCF,aAAa,CAACI,MAAM,GAAKF,YAAY,CAACE,MAAM,CAC5C,CACAD,eAAe,CAAC,SAACE,YAAY,qCAASA,YAAY,qBAAKL,aAAa,IAAC,CAAC,CACtEC,gBAAgB,CAAC,EAAE,CAAC,CACtB,CACF,CACA;AACF,CAAC,CAAE,CAACD,aAAa,CAAC,CAAC,CAEnB,QAASM,iBAAgB,CAACC,YAAY,CAAE,CACtCN,gBAAgB,CAAC,SAACI,YAAY,qCAASA,YAAY,qBAAKE,YAAY,IAAC,CAAC,CACxE,CAEA,QAASC,aAAY,CAACC,QAAQ,CAAE,CAC9B,GAAMC,eAAc,oBAAOR,YAAY,CAAC,CAAE;AAC1CQ,cAAc,CAACC,MAAM,CAACF,QAAQ,CAAE,CAAC,CAAC,CAElCN,eAAe,CAACO,cAAc,CAAC,CACjC,CAEA,GAAME,WAAU,CAAG,CACjBZ,aAAa,CAAbA,aAAa,CACbC,gBAAgB,CAAhBA,gBAAgB,CAChBK,gBAAgB,CAAhBA,gBAAgB,CAChBJ,YAAY,CAAZA,YAAY,CACZM,YAAY,CAAZA,YACF,CAAC,CAED,mBACE,KAAC,YAAY,CAAC,QAAQ,EAAC,KAAK,CAAEI,UAAW,UACtCb,KAAK,CAACc,QAAQ,EACO,CAE5B"},"metadata":{},"sourceType":"module","externalDependencies":[]}