{"ast":null,"code":"import _slicedToArray from\"/home/agreus/Documents/webdev/mercury-messenger/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext,useEffect}from\"react\";// ui\nimport CardFloat from\"../ui/CardFloat\";import CircleButton from\"../ui/CircleButton\";// context\nimport{DataContext}from\"../context/DataContext\";// SVG\nimport{ArrowRightIcon}from\"@heroicons/react/solid\";import{Link}from\"react-router-dom\";// vars\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var channelNameInput;var channelTypeInput;function NewChannelForm(props){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),inpErr=_useState2[0],setInpErr=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),feedback=_useState4[0],setFeedback=_useState4[1];var _useState5=useState(\"error\"),_useState6=_slicedToArray(_useState5,2),buttonStatus=_useState6[0],setButtonStatus=_useState6[1];var _useContext=useContext(DataContext),selectedGroup=_useContext.selectedGroup,dataReady=_useContext.dataReady;useEffect(function(){if(props.err.message&&feedback!==props.err.message){setFeedback(props.err.message);setButtonStatus(\"error\");setInpErr(true);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[props.err]);function onChangeHandler(e){if(e.target.type===\"text\"){channelNameInput=e.target.value.trim();}else if(e.target.type===\"radio\"){channelTypeInput=e.target.value;}function giveError(feedback){setInpErr(true);setButtonStatus(\"error\");setFeedback(feedback);}if(!channelNameInput){giveError(\"A name is required\");}else if(/[^\\w\\d ]+/.test(channelNameInput)){giveError(\"Name cannot contain special characters\");}else if(channelNameInput.length<3){giveError(\"Name must be at least 3 characters\");}else if(channelNameInput.length>20){giveError(\"Name must not exceed 20 characters\");}else if(!channelTypeInput){giveError(\"Select a channel type\");}else{setInpErr(false);setButtonStatus(\"ok\");setFeedback(\"Looks good\");}}function submitHandler(e){e.preventDefault();if(!inpErr){var newChannel={group:selectedGroup._id,name:channelNameInput,type:channelTypeInput};props.onNewChannel(newChannel);// run passed func on parent\n}}return/*#__PURE__*/_jsx(\"form\",{className:\"bg-gray-700 w-full h-full flex justify-center items-center bgHeroDiagLight absolute md:static\",onSubmit:submitHandler,children:/*#__PURE__*/_jsxs(CardFloat,{className:\"w-full m-2 md:w-3/4 md:max-w-2xl\",children:[!dataReady||/*#__PURE__*/_jsx(Link,{to:\"/g/\".concat(selectedGroup.name),className:\"my-1 text-gray-400 h-6 md:h-0 md:opacity-0 md:fixed\",children:\"< back\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-mexican-red-600 mb-2 font-montserrat font-semibold\",children:\"New Channel\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"mb-2 text-lg font-medium text-gray-400\",children:[\"Channel name\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"...\",autoComplete:\"off\",className:\"bg-gray-700 p-2 m-1 w-full rounded-md text-sm drop-shadow-md text-grey-500 file:mr-5 file:py-2 file:px-10 file:rounded-md file:border-0 file:text-md file:font-semibold file:text-gray-300 file:bg-gray-500 hover:file:cursor-pointer hover:file:opacity-80 hover:bg-gray-600 transition-colors duration-75 ease-in outline-none\",required:true,onChange:onChangeHandler})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mb-2 text-lg font-medium text-gray-400\",children:\"Channel type\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"grid gap-6 w-full md:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"type\",name:\"type\",value:\"text\",className:\"hidden peer\",onChange:onChangeHandler}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"type\",className:\"inline-flex justify-between items-center p-5 w-full text-gray-400 bg-gray-800 rounded-lg border border-gray-600 cursor-pointer peer-checked:border-mexican-red-400 peer-checked:text-mexican-red-400 hover:bg-gray-700\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"block\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full text-lg font-semibold\",children:\"Text \"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full\",children:\"Chat and discuss\"})]}),/*#__PURE__*/_jsx(ArrowRightIcon,{className:\"ml-3 w-6 h-6 shrink-0\"})]})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"pointer-events-none flex justify-center items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute text-2xl rotate-12 text-mexican-red-400\",children:\"coming soon!\"}),/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"task\",name:\"type\",value:\"task\",className:\"hidden peer\",onChange:onChangeHandler}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"task\",className:\"inline-flex justify-between items-center p-5 w-full text-gray-400 bg-gray-800 rounded-lg border border-gray-600 cursor-pointer peer-checked:border-mexican-red-400 peer-checked:text-mexican-red-400 hover:bg-gray-700\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"block opacity-40\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full text-lg font-semibold\",children:\"Tasks \"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full\",children:\"Collaborate on tasks\"})]}),/*#__PURE__*/_jsx(ArrowRightIcon,{className:\"ml-3 w-6 h-6 shrink-0\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex justify-end items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 pl-0 text-md\",children:feedback}),/*#__PURE__*/_jsx(CircleButton,{status:buttonStatus})]})]})]})});}export default NewChannelForm;","map":{"version":3,"names":["useState","useContext","useEffect","CardFloat","CircleButton","DataContext","ArrowRightIcon","Link","channelNameInput","channelTypeInput","NewChannelForm","props","inpErr","setInpErr","feedback","setFeedback","buttonStatus","setButtonStatus","selectedGroup","dataReady","err","message","onChangeHandler","e","target","type","value","trim","giveError","test","length","submitHandler","preventDefault","newChannel","group","_id","name","onNewChannel"],"sources":["/home/agreus/Documents/webdev/mercury-messenger/client/src/components/forms/NewChannelForm.js"],"sourcesContent":["import { useState, useContext, useEffect } from \"react\";\n\n// ui\nimport CardFloat from \"../ui/CardFloat\";\nimport CircleButton from \"../ui/CircleButton\";\n\n// context\nimport { DataContext } from \"../context/DataContext\";\n\n// SVG\nimport { ArrowRightIcon } from \"@heroicons/react/solid\";\nimport { Link } from \"react-router-dom\";\n\n// vars\nlet channelNameInput;\nlet channelTypeInput;\n\nfunction NewChannelForm(props) {\n  const [inpErr, setInpErr] = useState(true);\n  const [feedback, setFeedback] = useState(\"\");\n  const [buttonStatus, setButtonStatus] = useState(\"error\");\n  const { selectedGroup, dataReady } = useContext(DataContext);\n\n  useEffect(() => {\n    if (props.err.message && feedback !== props.err.message) {\n      setFeedback(props.err.message);\n      setButtonStatus(\"error\");\n      setInpErr(true);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.err]);\n\n  function onChangeHandler(e) {\n    if (e.target.type === \"text\") {\n      channelNameInput = e.target.value.trim();\n    } else if (e.target.type === \"radio\") {\n      channelTypeInput = e.target.value;\n    }\n\n    function giveError(feedback) {\n      setInpErr(true);\n      setButtonStatus(\"error\");\n      setFeedback(feedback);\n    }\n\n    if (!channelNameInput) {\n      giveError(\"A name is required\");\n    } else if (/[^\\w\\d ]+/.test(channelNameInput)) {\n      giveError(\"Name cannot contain special characters\");\n    } else if (channelNameInput.length < 3) {\n      giveError(\"Name must be at least 3 characters\");\n    } else if (channelNameInput.length > 20) {\n      giveError(\"Name must not exceed 20 characters\");\n    } else if (!channelTypeInput) {\n      giveError(\"Select a channel type\");\n    } else {\n      setInpErr(false);\n      setButtonStatus(\"ok\");\n      setFeedback(\"Looks good\");\n    }\n  }\n\n  function submitHandler(e) {\n    e.preventDefault();\n    if (!inpErr) {\n      const newChannel = {\n        group: selectedGroup._id,\n        name: channelNameInput,\n        type: channelTypeInput,\n      };\n\n      props.onNewChannel(newChannel); // run passed func on parent\n    }\n  }\n\n  return (\n    <form\n      className=\"bg-gray-700 w-full h-full flex justify-center items-center bgHeroDiagLight absolute md:static\"\n      onSubmit={submitHandler}\n    >\n      <CardFloat className=\"w-full m-2 md:w-3/4 md:max-w-2xl\">\n        {!dataReady || (\n          <Link\n            to={`/g/${selectedGroup.name}`}\n            className=\"my-1 text-gray-400 h-6 md:h-0 md:opacity-0 md:fixed\"\n          >\n            &lt; back\n          </Link>\n        )}\n        <div className=\"text-mexican-red-600 mb-2 font-montserrat font-semibold\">\n          New Channel\n        </div>\n\n        <div className=\"flex flex-col\">\n          <label className=\"mb-2 text-lg font-medium text-gray-400\">\n            Channel name\n            <input\n              type=\"text\"\n              name=\"name\"\n              placeholder=\"...\"\n              autoComplete=\"off\"\n              className=\"bg-gray-700 p-2 m-1 w-full rounded-md text-sm drop-shadow-md text-grey-500 file:mr-5 file:py-2 file:px-10 file:rounded-md file:border-0 file:text-md file:font-semibold file:text-gray-300 file:bg-gray-500 hover:file:cursor-pointer hover:file:opacity-80 hover:bg-gray-600 transition-colors duration-75 ease-in outline-none\"\n              required\n              onChange={onChangeHandler}\n            />\n          </label>\n\n          <div className=\"mt-2\">\n            <h3 className=\"mb-2 text-lg font-medium text-gray-400\">\n              Channel type\n            </h3>\n            <ul className=\"grid gap-6 w-full md:grid-cols-2\">\n              <li>\n                <input\n                  type=\"radio\"\n                  id=\"type\"\n                  name=\"type\"\n                  value=\"text\"\n                  className=\"hidden peer\"\n                  onChange={onChangeHandler}\n                />\n                <label\n                  htmlFor=\"type\"\n                  className=\"inline-flex justify-between items-center p-5 w-full text-gray-400 bg-gray-800 rounded-lg border border-gray-600 cursor-pointer peer-checked:border-mexican-red-400 peer-checked:text-mexican-red-400 hover:bg-gray-700\"\n                >\n                  <div className=\"block\">\n                    <div className=\"w-full text-lg font-semibold\">Text </div>\n                    <div className=\"w-full\">Chat and discuss</div>\n                  </div>\n                  <ArrowRightIcon className=\"ml-3 w-6 h-6 shrink-0\" />\n                </label>\n              </li>\n\n              <li className=\"pointer-events-none flex justify-center items-center\">\n                <div className=\"absolute text-2xl rotate-12 text-mexican-red-400\">\n                  coming soon!\n                </div>\n                <input\n                  type=\"radio\"\n                  id=\"task\"\n                  name=\"type\"\n                  value=\"task\"\n                  className=\"hidden peer\"\n                  onChange={onChangeHandler}\n                ></input>\n                <label\n                  htmlFor=\"task\"\n                  className=\"inline-flex justify-between items-center p-5 w-full text-gray-400 bg-gray-800 rounded-lg border border-gray-600 cursor-pointer peer-checked:border-mexican-red-400 peer-checked:text-mexican-red-400 hover:bg-gray-700\"\n                >\n                  <div className=\"block opacity-40\">\n                    <div className=\"w-full text-lg font-semibold\">Tasks </div>\n                    <div className=\"w-full\">Collaborate on tasks</div>\n                  </div>\n                  <ArrowRightIcon className=\"ml-3 w-6 h-6 shrink-0\" />\n                </label>\n              </li>\n            </ul>\n          </div>\n          <div className=\"mt-6 flex justify-end items-center\">\n            <div className=\"p-2 pl-0 text-md\">{feedback}</div>\n            <CircleButton status={buttonStatus}></CircleButton>\n          </div>\n        </div>\n      </CardFloat>\n    </form>\n  );\n}\n\nexport default NewChannelForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}