{"ast":null,"code":"var _jsxFileName = \"/home/agreus/Documents/webdev/mercury-messenger/client/src/pages/NewGroupPage.js\",\n  _s = $RefreshSig$();\nimport { useNavigate } from \"react-router-dom\";\nimport { useContext, useState } from \"react\";\n// components\nimport NewGroupForm from \"../components/forms/NewGroupForm\";\nimport JoinByInvite from \"../components/forms/JoinByInvite\";\n// context\nimport { DataContext } from \"../components/context/DataContext\";\nimport { FlashContext } from \"../components/context/FlashContext\";\n// utility hooks\nimport axiosInstance from \"../utils/axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction NewGroupPage() {\n  _s();\n  const {\n    dataHelpers,\n    setSelectedGroup,\n    setSelectedChannel\n  } = useContext(DataContext);\n  const {\n    pushFlashMessage\n  } = useContext(FlashContext);\n  const [axiosCreateErr, setAxiosCreateErr] = useState({\n    message: null,\n    status: null\n  });\n  const [axiosJoinErr, setAxiosJoinErr] = useState({\n    message: null,\n    status: null\n  });\n  const {\n    userGroups\n  } = axiosInstance();\n  const navigate = useNavigate();\n  function newGroupHandler(groupObject) {\n    let newGroupData = new FormData();\n    newGroupData.append(\"name\", groupObject.name);\n    newGroupData.append(\"file\", groupObject.image);\n    userGroups.new(newGroupData).then(res => {\n      dataHelpers.addNewGroup(res.data.newGroup);\n      setSelectedGroup(res.data.newGroup);\n      setSelectedChannel(null);\n      pushFlashMessage(res.data.messages);\n      navigate(`/g/${res.data.newGroup.name}`);\n    }).catch(err => {\n      setAxiosCreateErr({\n        message: err.response.data.messages[0].message\n      });\n    });\n  }\n  function joinGroupHandler(joinCode) {\n    userGroups.join(joinCode).then(res => {\n      dataHelpers.addNewGroup(res.data.joinedGroup, res.data.chatData, res.data.chatDepleted);\n      dataHelpers.mergePeers(res.data.peerData);\n      setSelectedGroup(res.data.joinedGroup);\n      setSelectedChannel(null);\n      pushFlashMessage(res.data.messages);\n      navigate(`/g/${res.data.joinedGroup.name}`);\n    }).catch(err => {\n      setAxiosJoinErr({\n        message: err.response.data.messages[0].message\n      });\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gray-700 w-full flex flex-col p-2 justify-evenly items-center bgHeroDiagDark\",\n    children: [/*#__PURE__*/_jsxDEV(NewGroupForm, {\n      onNewGroup: newGroupHandler,\n      err: axiosCreateErr\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(JoinByInvite, {\n      onJoinGroup: joinGroupHandler,\n      err: axiosJoinErr\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n_s(NewGroupPage, \"l7xO8nToP1nDpZmuyJAB9i6PNYc=\", false, function () {\n  return [useNavigate];\n});\n_c = NewGroupPage;\nexport default NewGroupPage;\nvar _c;\n$RefreshReg$(_c, \"NewGroupPage\");","map":{"version":3,"names":["useNavigate","useContext","useState","NewGroupForm","JoinByInvite","DataContext","FlashContext","axiosInstance","NewGroupPage","dataHelpers","setSelectedGroup","setSelectedChannel","pushFlashMessage","axiosCreateErr","setAxiosCreateErr","message","status","axiosJoinErr","setAxiosJoinErr","userGroups","navigate","newGroupHandler","groupObject","newGroupData","FormData","append","name","image","new","then","res","addNewGroup","data","newGroup","messages","catch","err","response","joinGroupHandler","joinCode","join","joinedGroup","chatData","chatDepleted","mergePeers","peerData"],"sources":["/home/agreus/Documents/webdev/mercury-messenger/client/src/pages/NewGroupPage.js"],"sourcesContent":["import { useNavigate } from \"react-router-dom\";\nimport { useContext, useState } from \"react\";\n// components\nimport NewGroupForm from \"../components/forms/NewGroupForm\";\nimport JoinByInvite from \"../components/forms/JoinByInvite\";\n// context\nimport { DataContext } from \"../components/context/DataContext\";\nimport { FlashContext } from \"../components/context/FlashContext\";\n// utility hooks\nimport axiosInstance from \"../utils/axios\";\n\nfunction NewGroupPage() {\n  const { dataHelpers, setSelectedGroup, setSelectedChannel } =\n    useContext(DataContext);\n  const { pushFlashMessage } = useContext(FlashContext);\n  const [axiosCreateErr, setAxiosCreateErr] = useState({\n    message: null,\n    status: null,\n  });\n  const [axiosJoinErr, setAxiosJoinErr] = useState({\n    message: null,\n    status: null,\n  });\n  const { userGroups } = axiosInstance();\n  const navigate = useNavigate();\n\n  function newGroupHandler(groupObject) {\n    let newGroupData = new FormData();\n    newGroupData.append(\"name\", groupObject.name);\n    newGroupData.append(\"file\", groupObject.image);\n\n    userGroups\n      .new(newGroupData)\n      .then((res) => {\n        dataHelpers.addNewGroup(res.data.newGroup);\n\n        setSelectedGroup(res.data.newGroup);\n        setSelectedChannel(null);\n\n        pushFlashMessage(res.data.messages);\n        navigate(`/g/${res.data.newGroup.name}`);\n      })\n      .catch((err) => {\n        setAxiosCreateErr({\n          message: err.response.data.messages[0].message,\n        });\n      });\n  }\n\n  function joinGroupHandler(joinCode) {\n    userGroups\n      .join(joinCode)\n      .then((res) => {\n        dataHelpers.addNewGroup(\n          res.data.joinedGroup,\n          res.data.chatData,\n          res.data.chatDepleted\n        );\n        dataHelpers.mergePeers(res.data.peerData);\n\n        setSelectedGroup(res.data.joinedGroup);\n        setSelectedChannel(null);\n\n        pushFlashMessage(res.data.messages);\n        navigate(`/g/${res.data.joinedGroup.name}`);\n      })\n      .catch((err) => {\n        setAxiosJoinErr({\n          message: err.response.data.messages[0].message,\n        });\n      });\n  }\n\n  return (\n    <div className=\"bg-gray-700 w-full flex flex-col p-2 justify-evenly items-center bgHeroDiagDark\">\n      <NewGroupForm onNewGroup={newGroupHandler} err={axiosCreateErr} />\n      <JoinByInvite onJoinGroup={joinGroupHandler} err={axiosJoinErr} />\n    </div>\n  );\n}\n\nexport default NewGroupPage;\n"],"mappings":";;AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,UAAU,EAAEC,QAAQ,QAAQ,OAAO;AAC5C;AACA,OAAOC,YAAY,MAAM,kCAAkC;AAC3D,OAAOC,YAAY,MAAM,kCAAkC;AAC3D;AACA,SAASC,WAAW,QAAQ,mCAAmC;AAC/D,SAASC,YAAY,QAAQ,oCAAoC;AACjE;AACA,OAAOC,aAAa,MAAM,gBAAgB;AAAC;AAE3C,SAASC,YAAY,GAAG;EAAA;EACtB,MAAM;IAAEC,WAAW;IAAEC,gBAAgB;IAAEC;EAAmB,CAAC,GACzDV,UAAU,CAACI,WAAW,CAAC;EACzB,MAAM;IAAEO;EAAiB,CAAC,GAAGX,UAAU,CAACK,YAAY,CAAC;EACrD,MAAM,CAACO,cAAc,EAAEC,iBAAiB,CAAC,GAAGZ,QAAQ,CAAC;IACnDa,OAAO,EAAE,IAAI;IACbC,MAAM,EAAE;EACV,CAAC,CAAC;EACF,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGhB,QAAQ,CAAC;IAC/Ca,OAAO,EAAE,IAAI;IACbC,MAAM,EAAE;EACV,CAAC,CAAC;EACF,MAAM;IAAEG;EAAW,CAAC,GAAGZ,aAAa,EAAE;EACtC,MAAMa,QAAQ,GAAGpB,WAAW,EAAE;EAE9B,SAASqB,eAAe,CAACC,WAAW,EAAE;IACpC,IAAIC,YAAY,GAAG,IAAIC,QAAQ,EAAE;IACjCD,YAAY,CAACE,MAAM,CAAC,MAAM,EAAEH,WAAW,CAACI,IAAI,CAAC;IAC7CH,YAAY,CAACE,MAAM,CAAC,MAAM,EAAEH,WAAW,CAACK,KAAK,CAAC;IAE9CR,UAAU,CACPS,GAAG,CAACL,YAAY,CAAC,CACjBM,IAAI,CAAEC,GAAG,IAAK;MACbrB,WAAW,CAACsB,WAAW,CAACD,GAAG,CAACE,IAAI,CAACC,QAAQ,CAAC;MAE1CvB,gBAAgB,CAACoB,GAAG,CAACE,IAAI,CAACC,QAAQ,CAAC;MACnCtB,kBAAkB,CAAC,IAAI,CAAC;MAExBC,gBAAgB,CAACkB,GAAG,CAACE,IAAI,CAACE,QAAQ,CAAC;MACnCd,QAAQ,CAAE,MAAKU,GAAG,CAACE,IAAI,CAACC,QAAQ,CAACP,IAAK,EAAC,CAAC;IAC1C,CAAC,CAAC,CACDS,KAAK,CAAEC,GAAG,IAAK;MACdtB,iBAAiB,CAAC;QAChBC,OAAO,EAAEqB,GAAG,CAACC,QAAQ,CAACL,IAAI,CAACE,QAAQ,CAAC,CAAC,CAAC,CAACnB;MACzC,CAAC,CAAC;IACJ,CAAC,CAAC;EACN;EAEA,SAASuB,gBAAgB,CAACC,QAAQ,EAAE;IAClCpB,UAAU,CACPqB,IAAI,CAACD,QAAQ,CAAC,CACdV,IAAI,CAAEC,GAAG,IAAK;MACbrB,WAAW,CAACsB,WAAW,CACrBD,GAAG,CAACE,IAAI,CAACS,WAAW,EACpBX,GAAG,CAACE,IAAI,CAACU,QAAQ,EACjBZ,GAAG,CAACE,IAAI,CAACW,YAAY,CACtB;MACDlC,WAAW,CAACmC,UAAU,CAACd,GAAG,CAACE,IAAI,CAACa,QAAQ,CAAC;MAEzCnC,gBAAgB,CAACoB,GAAG,CAACE,IAAI,CAACS,WAAW,CAAC;MACtC9B,kBAAkB,CAAC,IAAI,CAAC;MAExBC,gBAAgB,CAACkB,GAAG,CAACE,IAAI,CAACE,QAAQ,CAAC;MACnCd,QAAQ,CAAE,MAAKU,GAAG,CAACE,IAAI,CAACS,WAAW,CAACf,IAAK,EAAC,CAAC;IAC7C,CAAC,CAAC,CACDS,KAAK,CAAEC,GAAG,IAAK;MACdlB,eAAe,CAAC;QACdH,OAAO,EAAEqB,GAAG,CAACC,QAAQ,CAACL,IAAI,CAACE,QAAQ,CAAC,CAAC,CAAC,CAACnB;MACzC,CAAC,CAAC;IACJ,CAAC,CAAC;EACN;EAEA,oBACE;IAAK,SAAS,EAAC,iFAAiF;IAAA,wBAC9F,QAAC,YAAY;MAAC,UAAU,EAAEM,eAAgB;MAAC,GAAG,EAAER;IAAe;MAAA;MAAA;MAAA;IAAA,QAAG,eAClE,QAAC,YAAY;MAAC,WAAW,EAAEyB,gBAAiB;MAAC,GAAG,EAAErB;IAAa;MAAA;MAAA;MAAA;IAAA,QAAG;EAAA;IAAA;IAAA;IAAA;EAAA,QAC9D;AAEV;AAAC,GApEQT,YAAY;EAAA,QAaFR,WAAW;AAAA;AAAA,KAbrBQ,YAAY;AAsErB,eAAeA,YAAY;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}