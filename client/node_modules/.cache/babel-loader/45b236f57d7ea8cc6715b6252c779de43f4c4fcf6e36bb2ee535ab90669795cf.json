{"ast":null,"code":"var _jsxFileName = \"/home/agreus/Documents/webdev/mercury-messenger/client/src/components/channels/GroupBanner.js\",\n  _s = $RefreshSig$();\nimport { useState, useContext, useEffect } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\n\n// context\nimport { DataContext } from \"../context/DataContext\";\nimport { FlashContext } from \"../context/FlashContext\";\n\n// components\nimport { ChevronDownIcon, ChevronUpIcon } from \"@heroicons/react/solid\";\nimport InviteButton from \"../ui/InviteButton\";\n\n// utility hooks\nimport axiosInstance from \"../../utils/axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction GroupBanner(props) {\n  _s();\n  const [isExpanded, setIsExpanded] = useState(false);\n  const {\n    pushFlashMessage\n  } = useContext(FlashContext);\n  const {\n    dataReady,\n    dataHelpers,\n    selectedGroup,\n    setSelectedChannel,\n    clearSelected,\n    isAdmin\n  } = useContext(DataContext);\n  const navigate = useNavigate();\n  const {\n    userGroups\n  } = axiosInstance();\n  let inviteLink;\n  if (dataReady && selectedGroup) {\n    inviteLink = selectedGroup.inviteLink;\n  }\n\n  // close dropdown on group change\n  useEffect(() => {\n    return () => {\n      setIsExpanded(false);\n    };\n  }, [selectedGroup]);\n  function expandHandler(e) {\n    isExpanded ? setIsExpanded(false) : setIsExpanded(true);\n    if (e.target.id === \"settingsButton\") setSelectedChannel(null);\n  }\n  function leaveGroup() {\n    userGroups.leave(selectedGroup._id).then(res => {\n      clearSelected();\n      dataHelpers.removeGroup(selectedGroup._id);\n      pushFlashMessage(res.data.messages);\n      navigate(\"/\");\n    }).catch(err => {\n      pushFlashMessage(err.response.data.messages);\n    });\n  }\n  function deleteGroup() {\n    userGroups.delete(selectedGroup._id).then(res => {\n      clearSelected();\n      dataHelpers.removeGroup(selectedGroup._id);\n      pushFlashMessage(res.data.messages);\n      navigate(\"/\");\n    }).catch(err => {\n      pushFlashMessage(err.response.data.messages);\n    });\n  }\n  function AdminOptions() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        id: \"settingsButton\",\n        className: \"w-5/6 mx-4 my-1 px-4 py-1 text-center rounded-lg shadow-md bg-gray-700 hover:bg-gray-600 transition-colors ease-in duration-75\",\n        to: `/g/${selectedGroup.name}/settings`,\n        onClick: expandHandler,\n        children: \"SETTINGS\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"w-5/6 mx-4 my-1 px-4 py-1 text-center rounded-lg shadow-md bg-gray-700 hover:bg-gray-600 transition-colors ease-in duration-75\",\n        onClick: deleteGroup,\n        children: \"DELETE GROUP\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n  function TrayExpanded() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full px-2 py-4 bg-gray-900 text-gray-400 rounded-b-md shadow-md absolute top-10 flex flex-col justify-center items-center z-10\",\n      children: [/*#__PURE__*/_jsxDEV(InviteButton, {\n        inviteLink: inviteLink\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), isAdmin() ? /*#__PURE__*/_jsxDEV(AdminOptions, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 22\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"w-5/6 mx-4 my-1 px-4 py-1 text-center rounded-lg shadow-md bg-gray-700 hover:bg-gray-600 transition-colors ease-in duration-75\",\n        onClick: leaveGroup,\n        children: \"LEAVE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-12 h-3 bg-gray-900 rounded-b-lg shadow-md flex items-center justify-center absolute -bottom-3 hover:h-4 hover:translate-y-1 transition-all cursor-pointer group\",\n        onClick: expandHandler,\n        children: /*#__PURE__*/_jsxDEV(ChevronUpIcon, {\n          className: \"h-4 w-3 text-gray-700 group-hover:text-gray-500 transition-colors\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this);\n  }\n  function TrayCollapsed() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-20 h-4 md:w-12 md:h-3 bg-gray-800 rounded-b-lg fixed top-10 flex justify-center items-center shadow-md hover:h-6 transition-all cursor-pointer group\",\n      onClick: expandHandler,\n      children: /*#__PURE__*/_jsxDEV(ChevronDownIcon, {\n        className: \"h-6 w-6 md:w-3 md:-h-3 text-gray-700 group-hover:text-gray-500 transition-colors\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full h-10 bg-gray-800 flex justify-center shadow-md items-center relative\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"m-2 text-gray-400 truncate font-montserrat\",\n      children: props.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this), isExpanded ? /*#__PURE__*/_jsxDEV(TrayExpanded, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(TrayCollapsed, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 40\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 5\n  }, this);\n}\n_s(GroupBanner, \"qclVzypLNNf3gDrlcQ1aUs3UqBE=\", false, function () {\n  return [useNavigate];\n});\n_c = GroupBanner;\nexport default GroupBanner;\nvar _c;\n$RefreshReg$(_c, \"GroupBanner\");","map":{"version":3,"names":["useState","useContext","useEffect","Link","useNavigate","DataContext","FlashContext","ChevronDownIcon","ChevronUpIcon","InviteButton","axiosInstance","GroupBanner","props","isExpanded","setIsExpanded","pushFlashMessage","dataReady","dataHelpers","selectedGroup","setSelectedChannel","clearSelected","isAdmin","navigate","userGroups","inviteLink","expandHandler","e","target","id","leaveGroup","leave","_id","then","res","removeGroup","data","messages","catch","err","response","deleteGroup","delete","AdminOptions","name","TrayExpanded","TrayCollapsed"],"sources":["/home/agreus/Documents/webdev/mercury-messenger/client/src/components/channels/GroupBanner.js"],"sourcesContent":["import { useState, useContext, useEffect } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\n\n// context\nimport { DataContext } from \"../context/DataContext\";\nimport { FlashContext } from \"../context/FlashContext\";\n\n// components\nimport { ChevronDownIcon, ChevronUpIcon } from \"@heroicons/react/solid\";\nimport InviteButton from \"../ui/InviteButton\";\n\n// utility hooks\nimport axiosInstance from \"../../utils/axios\";\n\nfunction GroupBanner(props) {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const { pushFlashMessage } = useContext(FlashContext);\n  const {\n    dataReady,\n    dataHelpers,\n    selectedGroup,\n    setSelectedChannel,\n    clearSelected,\n    isAdmin,\n  } = useContext(DataContext);\n  const navigate = useNavigate();\n  const { userGroups } = axiosInstance();\n\n  let inviteLink;\n\n  if (dataReady && selectedGroup) {\n    inviteLink = selectedGroup.inviteLink;\n  }\n\n  // close dropdown on group change\n  useEffect(() => {\n    return () => {\n      setIsExpanded(false);\n    };\n  }, [selectedGroup]);\n\n  function expandHandler(e) {\n    isExpanded ? setIsExpanded(false) : setIsExpanded(true);\n    if (e.target.id === \"settingsButton\") setSelectedChannel(null);\n  }\n\n  function leaveGroup() {\n    userGroups\n      .leave(selectedGroup._id)\n      .then((res) => {\n        clearSelected();\n        dataHelpers.removeGroup(selectedGroup._id);\n        pushFlashMessage(res.data.messages);\n        navigate(\"/\");\n      })\n      .catch((err) => {\n        pushFlashMessage(err.response.data.messages);\n      });\n  }\n\n  function deleteGroup() {\n    userGroups\n      .delete(selectedGroup._id)\n      .then((res) => {\n        clearSelected();\n        dataHelpers.removeGroup(selectedGroup._id);\n        pushFlashMessage(res.data.messages);\n        navigate(\"/\");\n      })\n      .catch((err) => {\n        pushFlashMessage(err.response.data.messages);\n      });\n  }\n\n  function AdminOptions() {\n    return (\n      <>\n        <Link\n          id=\"settingsButton\"\n          className=\"w-5/6 mx-4 my-1 px-4 py-1 text-center rounded-lg shadow-md bg-gray-700 hover:bg-gray-600 transition-colors ease-in duration-75\"\n          to={`/g/${selectedGroup.name}/settings`}\n          onClick={expandHandler}\n        >\n          SETTINGS\n        </Link>\n        <button\n          className=\"w-5/6 mx-4 my-1 px-4 py-1 text-center rounded-lg shadow-md bg-gray-700 hover:bg-gray-600 transition-colors ease-in duration-75\"\n          onClick={deleteGroup}\n        >\n          DELETE GROUP\n        </button>\n      </>\n    );\n  }\n\n  function TrayExpanded() {\n    return (\n      <div className=\"w-full px-2 py-4 bg-gray-900 text-gray-400 rounded-b-md shadow-md absolute top-10 flex flex-col justify-center items-center z-10\">\n        <InviteButton inviteLink={inviteLink} />\n        {isAdmin() ? <AdminOptions /> : null}\n        <button\n          className=\"w-5/6 mx-4 my-1 px-4 py-1 text-center rounded-lg shadow-md bg-gray-700 hover:bg-gray-600 transition-colors ease-in duration-75\"\n          onClick={leaveGroup}\n        >\n          LEAVE\n        </button>\n        <div\n          className=\"w-12 h-3 bg-gray-900 rounded-b-lg shadow-md flex items-center justify-center absolute -bottom-3 hover:h-4 hover:translate-y-1 transition-all cursor-pointer group\"\n          onClick={expandHandler}\n        >\n          <ChevronUpIcon className=\"h-4 w-3 text-gray-700 group-hover:text-gray-500 transition-colors\" />\n        </div>\n      </div>\n    );\n  }\n\n  function TrayCollapsed() {\n    return (\n      <div\n        className=\"w-20 h-4 md:w-12 md:h-3 bg-gray-800 rounded-b-lg fixed top-10 flex justify-center items-center shadow-md hover:h-6 transition-all cursor-pointer group\"\n        onClick={expandHandler}\n      >\n        <ChevronDownIcon className=\"h-6 w-6 md:w-3 md:-h-3 text-gray-700 group-hover:text-gray-500 transition-colors\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"w-full h-10 bg-gray-800 flex justify-center shadow-md items-center relative\">\n      <div className=\"m-2 text-gray-400 truncate font-montserrat\">\n        {props.name}\n      </div>\n      {isExpanded ? <TrayExpanded /> : <TrayCollapsed />}\n    </div>\n  );\n}\n\nexport default GroupBanner;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}