{"ast":null,"code":"import{useMemo,useContext}from\"react\";import{Link}from\"react-router-dom\";import{DataContext}from\"../context/DataContext\";import useSocket from\"../../utils/socket\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserBadge(props){var _useContext=useContext(DataContext),setSelectedGroup=_useContext.setSelectedGroup,setSelectedChannel=_useContext.setSelectedChannel,peerData=_useContext.peerData,peerHelpers=_useContext.peerHelpers;var _useSocket=useSocket(),forceStatusUpdate=_useSocket.forceStatusUpdate;var userStatus=useMemo(function(){return peerHelpers.getStatus(localStorage.userId);},// eslint-disable-next-line react-hooks/exhaustive-deps\n[peerData]);var statusIndicator;var nextStatus;switch(userStatus){case\"online\":statusIndicator=\"border-2 bg-green-500\";nextStatus=\"away\";break;case\"away\":statusIndicator=\"border-2 bg-yellow-500\";nextStatus=\"busy\";break;case\"busy\":statusIndicator=\"border-2 bg-red-500\";nextStatus=\"offline\";break;case\"offline\":statusIndicator=\"border-2 bg-gray-600\";nextStatus=\"online\";break;default:break;}function StatusButton(){return/*#__PURE__*/_jsx(\"span\",{title:\"change status to \".concat(nextStatus),className:\"w-2.5 h-2.5 group-hover:w-3 group-hover:h-3 \".concat(statusIndicator,\" rounded-full border-solid border-4 box-content border-gray-800 absolute right-1.5 bottom-1.5 transition-all ease-in-out duration-200\"),onClick:function onClick(e){return forceStatusUpdate(nextStatus);}});}if(props.loading){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-700 h-16 w-16 m-2 mt-0 rounded-2xl inline-block transition-all animate-pulse\"});}else{return/*#__PURE__*/_jsxs(Link,{className:\"relative group\",to:\"/u\",onClick:function onClick(e){e.nativeEvent.stopImmediatePropagation();// prevents nav to /user from clicking status button\nsetSelectedChannel(null);setSelectedGroup(null);},children:[/*#__PURE__*/_jsx(\"img\",{src:localStorage.userImageSmall,className:\"bg-gray-700 h-16 w-16 m-2 mt-0 object-cover rounded-2xl inline-block group-hover:rounded-lg transition-all ease-in\",alt:\"profile\"}),/*#__PURE__*/_jsx(StatusButton,{})]});}}export default UserBadge;","map":{"version":3,"names":["useMemo","useContext","Link","DataContext","useSocket","UserBadge","props","setSelectedGroup","setSelectedChannel","peerData","peerHelpers","forceStatusUpdate","userStatus","getStatus","localStorage","userId","statusIndicator","nextStatus","StatusButton","e","loading","nativeEvent","stopImmediatePropagation","userImageSmall"],"sources":["/home/agreus/Documents/webdev/mercury-messenger/client/src/components/groups/UserBadge.js"],"sourcesContent":["import { useMemo, useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport { DataContext } from \"../context/DataContext\";\nimport useSocket from \"../../utils/socket\";\n\nfunction UserBadge(props) {\n  const { setSelectedGroup, setSelectedChannel, peerData, peerHelpers } =\n    useContext(DataContext);\n  const { forceStatusUpdate } = useSocket();\n\n  const userStatus = useMemo(\n    () => peerHelpers.getStatus(localStorage.userId),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [peerData]\n  );\n\n  let statusIndicator;\n  let nextStatus;\n  switch (userStatus) {\n    case \"online\":\n      statusIndicator = \"border-2 bg-green-500\";\n      nextStatus = \"away\";\n      break;\n\n    case \"away\":\n      statusIndicator = \"border-2 bg-yellow-500\";\n      nextStatus = \"busy\";\n      break;\n\n    case \"busy\":\n      statusIndicator = \"border-2 bg-red-500\";\n      nextStatus = \"offline\";\n      break;\n\n    case \"offline\":\n      statusIndicator = \"border-2 bg-gray-600\";\n      nextStatus = \"online\";\n      break;\n\n    default:\n      break;\n  }\n\n  function StatusButton() {\n    return (\n      <span\n        title={`change status to ${nextStatus}`}\n        className={`w-2.5 h-2.5 group-hover:w-3 group-hover:h-3 ${statusIndicator} rounded-full border-solid border-4 box-content border-gray-800 absolute right-1.5 bottom-1.5 transition-all ease-in-out duration-200`}\n        onClick={(e) => forceStatusUpdate(nextStatus)}\n      ></span>\n    );\n  }\n\n  if (props.loading) {\n    return (\n      <div className=\"bg-gray-700 h-16 w-16 m-2 mt-0 rounded-2xl inline-block transition-all animate-pulse\" />\n    );\n  } else {\n    return (\n      <Link\n        className=\"relative group\"\n        to=\"/u\"\n        onClick={(e) => {\n          e.nativeEvent.stopImmediatePropagation(); // prevents nav to /user from clicking status button\n          setSelectedChannel(null);\n          setSelectedGroup(null);\n        }}\n      >\n        <img\n          src={localStorage.userImageSmall}\n          className=\"bg-gray-700 h-16 w-16 m-2 mt-0 object-cover rounded-2xl inline-block group-hover:rounded-lg transition-all ease-in\"\n          alt=\"profile\"\n        />\n        <StatusButton />\n      </Link>\n    );\n  }\n}\n\nexport default UserBadge;\n"],"mappings":"AAAA,OAASA,OAAO,CAAEC,UAAU,KAAQ,OAAO,CAC3C,OAASC,IAAI,KAAQ,kBAAkB,CAEvC,OAASC,WAAW,KAAQ,wBAAwB,CACpD,MAAOC,UAAS,KAAM,oBAAoB,CAAC,wFAE3C,QAASC,UAAS,CAACC,KAAK,CAAE,CACxB,gBACEL,UAAU,CAACE,WAAW,CAAC,CADjBI,gBAAgB,aAAhBA,gBAAgB,CAAEC,kBAAkB,aAAlBA,kBAAkB,CAAEC,QAAQ,aAARA,QAAQ,CAAEC,WAAW,aAAXA,WAAW,CAEnE,eAA8BN,SAAS,EAAE,CAAjCO,iBAAiB,YAAjBA,iBAAiB,CAEzB,GAAMC,WAAU,CAAGZ,OAAO,CACxB,iBAAMU,YAAW,CAACG,SAAS,CAACC,YAAY,CAACC,MAAM,CAAC,GAChD;AACA,CAACN,QAAQ,CAAC,CACX,CAED,GAAIO,gBAAe,CACnB,GAAIC,WAAU,CACd,OAAQL,UAAU,EAChB,IAAK,QAAQ,CACXI,eAAe,CAAG,uBAAuB,CACzCC,UAAU,CAAG,MAAM,CACnB,MAEF,IAAK,MAAM,CACTD,eAAe,CAAG,wBAAwB,CAC1CC,UAAU,CAAG,MAAM,CACnB,MAEF,IAAK,MAAM,CACTD,eAAe,CAAG,qBAAqB,CACvCC,UAAU,CAAG,SAAS,CACtB,MAEF,IAAK,SAAS,CACZD,eAAe,CAAG,sBAAsB,CACxCC,UAAU,CAAG,QAAQ,CACrB,MAEF,QACE,MAAM,CAGV,QAASC,aAAY,EAAG,CACtB,mBACE,aACE,KAAK,4BAAsBD,UAAU,CAAG,CACxC,SAAS,uDAAiDD,eAAe,yIAAwI,CACjN,OAAO,CAAE,iBAACG,CAAC,QAAKR,kBAAiB,CAACM,UAAU,CAAC,EAAC,EACxC,CAEZ,CAEA,GAAIX,KAAK,CAACc,OAAO,CAAE,CACjB,mBACE,YAAK,SAAS,CAAC,sFAAsF,EAAG,CAE5G,CAAC,IAAM,CACL,mBACE,MAAC,IAAI,EACH,SAAS,CAAC,gBAAgB,CAC1B,EAAE,CAAC,IAAI,CACP,OAAO,CAAE,iBAACD,CAAC,CAAK,CACdA,CAAC,CAACE,WAAW,CAACC,wBAAwB,EAAE,CAAE;AAC1Cd,kBAAkB,CAAC,IAAI,CAAC,CACxBD,gBAAgB,CAAC,IAAI,CAAC,CACxB,CAAE,wBAEF,YACE,GAAG,CAAEO,YAAY,CAACS,cAAe,CACjC,SAAS,CAAC,oHAAoH,CAC9H,GAAG,CAAC,SAAS,EACb,cACF,KAAC,YAAY,IAAG,GACX,CAEX,CACF,CAEA,cAAelB,UAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}